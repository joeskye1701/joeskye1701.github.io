<!DOCTYPE html>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>Tomcat（五）类加载器机制 - Joe|博客</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="当一个JVM启动时，至少有三个ClassLoader会被启动：  Bootstrap 类加载器：加载Java核心包，它们被置放在(&amp;lt;JAVA_HOME&amp;gt;/lib目录下，这部分是JVM的一部分，往往使用native code完成。 Extensions类加载器：加载Java扩展包，即位于&amp;lt;JAVA_HOME&amp;gt;/lib/ext下的包，这里要注意的是，有些JVM的这个加载器和Bo">
<meta name="keywords" content="开源项目,Tomcat">
<meta property="og:type" content="article">
<meta property="og:title" content="Tomcat（五）类加载器机制">
<meta property="og:url" content="https://joeskye1701.github.io/Tomcat-5/index.html">
<meta property="og:site_name" content="Joe|博客">
<meta property="og:description" content="当一个JVM启动时，至少有三个ClassLoader会被启动：  Bootstrap 类加载器：加载Java核心包，它们被置放在(&amp;lt;JAVA_HOME&amp;gt;/lib目录下，这部分是JVM的一部分，往往使用native code完成。 Extensions类加载器：加载Java扩展包，即位于&amp;lt;JAVA_HOME&amp;gt;/lib/ext下的包，这里要注意的是，有些JVM的这个加载器和Bo">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://joeskye1701.github.io/Tomcat-5/tomcat-5-1.jpg">
<meta property="og:updated_time" content="2019-03-08T18:22:21.078Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tomcat（五）类加载器机制">
<meta name="twitter:description" content="当一个JVM启动时，至少有三个ClassLoader会被启动：  Bootstrap 类加载器：加载Java核心包，它们被置放在(&amp;lt;JAVA_HOME&amp;gt;/lib目录下，这部分是JVM的一部分，往往使用native code完成。 Extensions类加载器：加载Java扩展包，即位于&amp;lt;JAVA_HOME&amp;gt;/lib/ext下的包，这里要注意的是，有些JVM的这个加载器和Bo">
<meta name="twitter:image" content="https://joeskye1701.github.io/Tomcat-5/tomcat-5-1.jpg">





<link rel="icon" href="/images/thank-you-kobe.jpg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/xcode.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
<script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?c422b171d3bdb7dbfae47ff3f70f9d30";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>

    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                Joe|博客
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">主页</a>
                
                <a class="navbar-item" href="/archives">归档</a>
                
                <a class="navbar-item" href="/categories">分类</a>
                
                <a class="navbar-item" href="/tags">标签</a>
                
                <a class="navbar-item" href="/about">关于</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-10-05T04:37:22.000Z">2016-10-05</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Tomcat/">Tomcat</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    28 分钟 读完 (大约 4258 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                Tomcat（五）类加载器机制
            
        </h1>
        <div class="content">
            <p>当一个JVM启动时，至少有三个ClassLoader会被启动：</p>
<ul>
<li>Bootstrap 类加载器：加载Java核心包，它们被置放在(<code>&lt;JAVA_HOME&gt;/lib</code>目录下，这部分是JVM的一部分，往往使用native code完成。</li>
<li>Extensions类加载器：加载Java扩展包，即位于<code>&lt;JAVA_HOME&gt;/lib/ext</code>下的包，这里要注意的是，有些JVM的这个加载器和Bootstrap类加载器是同一个加载器，而Sun是把二者分开的，其实现类为<code>sun.misc.Launcher$ExtClassLoader</code>。</li>
<li>System类加载器：这个类加载器加载CLASSPATH下的类，Sun的默认实现是<code>sun.misc.Launcher$ExtClassLoader</code>。  </li>
</ul>
<p>这三者之间的父子关系是：Bootstrap类加载器是Extensions类加载器的父类加载器，而Extensions类加载器是System类加载器的父类加载器。<br>Tomcat的Classloader机制，从Bootstrap开始。在BootStrap初始化的时候，调用<code>org.apache.catalina.startup.Bootstrap#initClassLoaders()</code>，这个方法里面创建3个ClassLoader，它们分别是commonLoader，catalinaLoader，sharedLoader，其中catalinaLoader，sharedLoader的父亲加载器是commonLoader，initClassLoaders执行的过程中会执行createClassLoader，而createClassLoader是根据<code>conf/catalina.properties</code>文件中<code>common.loader</code>，<code>server.loader</code>，<code>shared.loader</code>的值来初始化，它的代码如下。<br><strong>org.apache.catalina.startup.Bootstrap#createClassLoader()</strong><br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">private</span> ClassLoader <span class="hljs-title">createClassLoader</span><span class="hljs-params">(String name, ClassLoader parent)</span></span></span><br><span class="line"><span class="hljs-function">    <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    String value = CatalinaProperties.getProperty(name + <span class="hljs-string">".loader"</span>);</span><br><span class="line">    <span class="hljs-comment">// 1 </span></span><br><span class="line">    <span class="hljs-keyword">if</span> ((value == <span class="hljs-keyword">null</span>) || (value.equals(<span class="hljs-string">""</span>)))</span><br><span class="line">        <span class="hljs-keyword">return</span> parent;</span><br><span class="line">    <span class="hljs-comment">// 2</span></span><br><span class="line">    value = replace(value);</span><br><span class="line"></span><br><span class="line">    List&lt;Repository&gt; repositories = <span class="hljs-keyword">new</span> ArrayList&lt;Repository&gt;();</span><br><span class="line"></span><br><span class="line">    StringTokenizer tokenizer = <span class="hljs-keyword">new</span> StringTokenizer(value, <span class="hljs-string">","</span>);</span><br><span class="line">    <span class="hljs-keyword">while</span> (tokenizer.hasMoreElements()) &#123;</span><br><span class="line">        String repository = tokenizer.nextToken().trim();</span><br><span class="line">        <span class="hljs-keyword">if</span> (repository.length() == <span class="hljs-number">0</span>) &#123;</span><br><span class="line">            <span class="hljs-keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">// Check for a JAR URL repository</span></span><br><span class="line">        <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">            <span class="hljs-meta">@SuppressWarnings</span>(<span class="hljs-string">"unused"</span>)</span><br><span class="line">            URL url = <span class="hljs-keyword">new</span> URL(repository);</span><br><span class="line">            repositories.add(</span><br><span class="line">                    <span class="hljs-keyword">new</span> Repository(repository, RepositoryType.URL));</span><br><span class="line">            <span class="hljs-keyword">continue</span>;</span><br><span class="line">        &#125; <span class="hljs-keyword">catch</span> (MalformedURLException e) &#123;</span><br><span class="line">            <span class="hljs-comment">// Ignore</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="hljs-comment">// Local repository</span></span><br><span class="line">        <span class="hljs-keyword">if</span> (repository.endsWith(<span class="hljs-string">"*.jar"</span>)) &#123;</span><br><span class="line">            repository = repository.substring</span><br><span class="line">                (<span class="hljs-number">0</span>, repository.length() - <span class="hljs-string">"*.jar"</span>.length());</span><br><span class="line">            repositories.add(</span><br><span class="line">                    <span class="hljs-keyword">new</span> Repository(repository, RepositoryType.GLOB));</span><br><span class="line">        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (repository.endsWith(<span class="hljs-string">".jar"</span>)) &#123;</span><br><span class="line">            repositories.add(</span><br><span class="line">                    <span class="hljs-keyword">new</span> Repository(repository, RepositoryType.JAR));</span><br><span class="line">        &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">            repositories.add(</span><br><span class="line">                    <span class="hljs-keyword">new</span> Repository(repository, RepositoryType.DIR));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-comment">// 3</span></span><br><span class="line">    ClassLoader classLoader = ClassLoaderFactory.createClassLoader</span><br><span class="line">        (repositories, parent);</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">// Retrieving MBean server</span></span><br><span class="line">    MBeanServer mBeanServer = <span class="hljs-keyword">null</span>;</span><br><span class="line">    <span class="hljs-keyword">if</span> (MBeanServerFactory.findMBeanServer(<span class="hljs-keyword">null</span>).size() &gt; <span class="hljs-number">0</span>) &#123;</span><br><span class="line">        mBeanServer = MBeanServerFactory.findMBeanServer(<span class="hljs-keyword">null</span>).get(<span class="hljs-number">0</span>);</span><br><span class="line">    &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">        mBeanServer = ManagementFactory.getPlatformMBeanServer();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">// Register the server classloader</span></span><br><span class="line">    ObjectName objectName =</span><br><span class="line">        <span class="hljs-keyword">new</span> ObjectName(<span class="hljs-string">"Catalina:type=ServerClassLoader,name="</span> + name);</span><br><span class="line">    mBeanServer.registerMBean(classLoader, objectName);</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">return</span> classLoader;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>标注1的代码：判断如果<code>catalina.properties</code>中没有配置对应的loader属性的话，直接返回父加载器，而默认情况下，<code>server.loader</code>，<code>shared.loader</code>为空，那么此时的catalinaLoader，sharedLoader其实是同一个ClassLoader。</li>
<li>标注2的代码：根据环境变量的配置替换字符串中的值，默认情况下，common.loader的值为<code>common.loader=${catalina.base}/lib</code>，<code>${catalina.base}/lib/.jar</code>，<code>${catalina.home}/lib</code>，<code>${catalina.home}/lib/.jar</code>，这里会将<code>catalina.base</code>和<code>catalina.home</code>用环境变量的值替换。</li>
<li>标注3的代码：最终调用<code>org.apache.catalina.startup.ClassLoaderFactory#createClassLoader()</code>静态工厂方法创建URLClassloader的实例，而具体的URL其实就是<code>*.loader</code>属性配置的内容，此外如果<code>parent = null</code>的话，则直接用系统类加载器。<a id="more"></a>
上面分析Tomcat在启动的时候，初始化的几个ClassLoader，接下再来继续看看，这些ClassLoader具体都用在什么地方。<br>接着来看<code>org.apache.catalina.startup.Bootstrap#init()</code>，在初始化完3个classLoader以后，接下来首先通过catalinaLoader加载<code>org.apache.catalina.startup.Catalinal</code>类，然后通过反射调用<code>org.apache.catalina.startup.Catalina#setParentClassLoader()</code>，具体代码片段如下。<br><strong>org.apache.catalina.startup.Bootstrap#init()</strong><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * Initialize daemon.</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function">    <span class="hljs-keyword">throws</span> Exception</span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">// Set Catalina path</span></span><br><span class="line">    setCatalinaHome();</span><br><span class="line">    setCatalinaBase();</span><br><span class="line"></span><br><span class="line">    initClassLoaders();</span><br><span class="line"></span><br><span class="line">    Thread.currentThread().setContextClassLoader(catalinaLoader);</span><br><span class="line"></span><br><span class="line">    SecurityClassLoad.securityClassLoad(catalinaLoader);</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">// Load our startup class and call its process() method</span></span><br><span class="line">    <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">        log.debug(<span class="hljs-string">"Loading startup class"</span>);</span><br><span class="line">    Class&lt;?&gt; startupClass =</span><br><span class="line">        catalinaLoader.loadClass</span><br><span class="line">        (<span class="hljs-string">"org.apache.catalina.startup.Catalina"</span>);</span><br><span class="line">    Object startupInstance = startupClass.newInstance();</span><br><span class="line"></span><br><span class="line">    <span class="hljs-comment">// Set the shared extensions class loader</span></span><br><span class="line">    <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">        log.debug(<span class="hljs-string">"Setting startup class properties"</span>);</span><br><span class="line">    String methodName = <span class="hljs-string">"setParentClassLoader"</span>;</span><br><span class="line">    Class&lt;?&gt; paramTypes[] = <span class="hljs-keyword">new</span> Class[<span class="hljs-number">1</span>];</span><br><span class="line">    paramTypes[<span class="hljs-number">0</span>] = Class.forName(<span class="hljs-string">"java.lang.ClassLoader"</span>);</span><br><span class="line">    Object paramValues[] = <span class="hljs-keyword">new</span> Object[<span class="hljs-number">1</span>];</span><br><span class="line">    paramValues[<span class="hljs-number">0</span>] = sharedLoader;</span><br><span class="line">    Method method =</span><br><span class="line">        startupInstance.getClass().getMethod(methodName, paramTypes);</span><br><span class="line">    method.invoke(startupInstance, paramValues);</span><br><span class="line">    catalinaDaemon = startupInstance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>通过上面的代码，可以清楚的看到调用<code>Catalina#setParentClassLoader()</code>，设置<code>parentClassLoader</code>以后，sharedLoader又是在哪里使用的呢？这就需要接着来分析容器启动的代码。通过查看<code>org.apache.catalina.startup.Catalina#getParentClassLoader()</code>调用栈，看到在<code>StandardContext#startInternal()</code>中调用它，那么查看一下它的代码，包含如下代码片段。<br><strong>org.apache.catalina.core.StandardContext#startInternal()</strong><br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">  * Start this component and implement the requirements</span></span><br><span class="line"><span class="hljs-comment">  * of &#123;<span class="hljs-doctag">@link</span> org.apache.catalina.util.LifecycleBase#startInternal()&#125;.</span></span><br><span class="line"><span class="hljs-comment">  *</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@exception</span> LifecycleException if this component detects a fatal error</span></span><br><span class="line"><span class="hljs-comment">  *  that prevents this component from being used</span></span><br><span class="line"><span class="hljs-comment">  */</span></span><br><span class="line"> <span class="hljs-meta">@Override</span></span><br><span class="line"> <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title">startInternal</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> LifecycleException </span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span>(log.isDebugEnabled())</span><br><span class="line">         log.debug(<span class="hljs-string">"Starting "</span> + getBaseName());</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Send j2ee.state.starting notification </span></span><br><span class="line">     <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getObjectName() != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">         Notification notification = <span class="hljs-keyword">new</span> Notification(<span class="hljs-string">"j2ee.state.starting"</span>,</span><br><span class="line">                 <span class="hljs-keyword">this</span>.getObjectName(), sequenceNumber.getAndIncrement());</span><br><span class="line">         broadcaster.sendNotification(notification);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     setConfigured(<span class="hljs-keyword">false</span>);</span><br><span class="line">     <span class="hljs-keyword">boolean</span> ok = <span class="hljs-keyword">true</span>;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Currently this is effectively a NO-OP but needs to be called to</span></span><br><span class="line">     <span class="hljs-comment">// ensure the NamingResources follows the correct lifecycle</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (namingResources != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">         namingResources.start();</span><br><span class="line">     &#125;</span><br><span class="line">     </span><br><span class="line">     <span class="hljs-comment">// Add missing components as necessary</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (webappResources == <span class="hljs-keyword">null</span>) &#123;   <span class="hljs-comment">// (1) Required by Loader</span></span><br><span class="line">         <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">             log.debug(<span class="hljs-string">"Configuring default Resources"</span>);</span><br><span class="line">         <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">             <span class="hljs-keyword">if</span> ((getDocBase() != <span class="hljs-keyword">null</span>) &amp;&amp; (getDocBase().endsWith(<span class="hljs-string">".war"</span>)) &amp;&amp;</span><br><span class="line">                     (!(<span class="hljs-keyword">new</span> File(getBasePath())).isDirectory()))</span><br><span class="line">                 setResources(<span class="hljs-keyword">new</span> WARDirContext());</span><br><span class="line">             <span class="hljs-keyword">else</span></span><br><span class="line">                 setResources(<span class="hljs-keyword">new</span> FileDirContext());</span><br><span class="line">         &#125; <span class="hljs-keyword">catch</span> (IllegalArgumentException e) &#123;</span><br><span class="line">             log.error(<span class="hljs-string">"Error initializing resources: "</span> + e.getMessage());</span><br><span class="line">             ok = <span class="hljs-keyword">false</span>;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="hljs-keyword">if</span> (ok) &#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (!resourcesStart()) &#123;</span><br><span class="line">             log.error( <span class="hljs-string">"Error in resourceStart()"</span>);</span><br><span class="line">             ok = <span class="hljs-keyword">false</span>;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="hljs-comment">// 1</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (getLoader() == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">         WebappLoader webappLoader = <span class="hljs-keyword">new</span> WebappLoader(getParentClassLoader());</span><br><span class="line">         webappLoader.setDelegate(getDelegate());</span><br><span class="line">         setLoader(webappLoader);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Initialize character set mapper</span></span><br><span class="line">     getCharsetMapper();</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Post work directory</span></span><br><span class="line">     postWorkDirectory();</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Validate required extensions</span></span><br><span class="line">     <span class="hljs-keyword">boolean</span> dependencyCheck = <span class="hljs-keyword">true</span>;</span><br><span class="line">     <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">         dependencyCheck = ExtensionValidator.validateApplication</span><br><span class="line">             (getResources(), <span class="hljs-keyword">this</span>);</span><br><span class="line">     &#125; <span class="hljs-keyword">catch</span> (IOException ioe) &#123;</span><br><span class="line">         log.error(<span class="hljs-string">"Error in dependencyCheck"</span>, ioe);</span><br><span class="line">         dependencyCheck = <span class="hljs-keyword">false</span>;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (!dependencyCheck) &#123;</span><br><span class="line">         <span class="hljs-comment">// do not make application available if depency check fails</span></span><br><span class="line">         ok = <span class="hljs-keyword">false</span>;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Reading the "catalina.useNaming" environment variable</span></span><br><span class="line">     String useNamingProperty = System.getProperty(<span class="hljs-string">"catalina.useNaming"</span>);</span><br><span class="line">     <span class="hljs-keyword">if</span> ((useNamingProperty != <span class="hljs-keyword">null</span>)</span><br><span class="line">         &amp;&amp; (useNamingProperty.equals(<span class="hljs-string">"false"</span>))) &#123;</span><br><span class="line">         useNaming = <span class="hljs-keyword">false</span>;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (ok &amp;&amp; isUseNaming()) &#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (getNamingContextListener() == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">             NamingContextListener ncl = <span class="hljs-keyword">new</span> NamingContextListener();</span><br><span class="line">             ncl.setName(getNamingContextName());</span><br><span class="line">             ncl.setExceptionOnFailedWrite(getJndiExceptionOnFailedWrite());</span><br><span class="line">             addLifecycleListener(ncl);</span><br><span class="line">             setNamingContextListener(ncl);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     </span><br><span class="line">     <span class="hljs-comment">// Standard container startup</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">         log.debug(<span class="hljs-string">"Processing standard container startup"</span>);</span><br><span class="line"></span><br><span class="line">     </span><br><span class="line">     <span class="hljs-comment">// Binding thread</span></span><br><span class="line">     ClassLoader oldCCL = bindThread();</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-keyword">if</span> (ok) &#123;</span><br><span class="line">             <span class="hljs-comment">// 2</span></span><br><span class="line">             <span class="hljs-comment">// Start our subordinate components, if any</span></span><br><span class="line">             <span class="hljs-keyword">if</span> ((loader != <span class="hljs-keyword">null</span>) &amp;&amp; (loader <span class="hljs-keyword">instanceof</span> Lifecycle))</span><br><span class="line">                 ((Lifecycle) loader).start();</span><br><span class="line"></span><br><span class="line">             <span class="hljs-comment">// since the loader just started, the webapp classloader is now</span></span><br><span class="line">             <span class="hljs-comment">// created.</span></span><br><span class="line">             <span class="hljs-comment">// By calling unbindThread and bindThread in a row, we setup the</span></span><br><span class="line">             <span class="hljs-comment">// current Thread CCL to be the webapp classloader</span></span><br><span class="line">             unbindThread(oldCCL);</span><br><span class="line">             oldCCL = bindThread();</span><br><span class="line"></span><br><span class="line">             <span class="hljs-comment">// Initialize logger again. Other components might have used it</span></span><br><span class="line">             <span class="hljs-comment">// too early, so it should be reset.</span></span><br><span class="line">             logger = <span class="hljs-keyword">null</span>;</span><br><span class="line">             getLogger();</span><br><span class="line">             </span><br><span class="line">             <span class="hljs-keyword">if</span> ((cluster != <span class="hljs-keyword">null</span>) &amp;&amp; (cluster <span class="hljs-keyword">instanceof</span> Lifecycle))</span><br><span class="line">                 ((Lifecycle) cluster).start();</span><br><span class="line">             Realm realm = getRealmInternal();</span><br><span class="line">             <span class="hljs-keyword">if</span> ((realm != <span class="hljs-keyword">null</span>) &amp;&amp; (realm <span class="hljs-keyword">instanceof</span> Lifecycle))</span><br><span class="line">                 ((Lifecycle) realm).start();</span><br><span class="line">             <span class="hljs-keyword">if</span> ((resources != <span class="hljs-keyword">null</span>) &amp;&amp; (resources <span class="hljs-keyword">instanceof</span> Lifecycle))</span><br><span class="line">                 ((Lifecycle) resources).start();</span><br><span class="line"></span><br><span class="line">             <span class="hljs-comment">// Notify our interested LifecycleListeners</span></span><br><span class="line">             fireLifecycleEvent(Lifecycle.CONFIGURE_START_EVENT, <span class="hljs-keyword">null</span>);</span><br><span class="line">             </span><br><span class="line">             <span class="hljs-comment">// Start our child containers, if not already started</span></span><br><span class="line">             <span class="hljs-keyword">for</span> (Container child : findChildren()) &#123;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (!child.getState().isAvailable()) &#123;</span><br><span class="line">                     child.start();</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;</span><br><span class="line"></span><br><span class="line">             <span class="hljs-comment">// Start the Valves in our pipeline (including the basic),</span></span><br><span class="line">             <span class="hljs-comment">// if any</span></span><br><span class="line">             <span class="hljs-keyword">if</span> (pipeline <span class="hljs-keyword">instanceof</span> Lifecycle) &#123;</span><br><span class="line">                 ((Lifecycle) pipeline).start();</span><br><span class="line">             &#125;</span><br><span class="line">             </span><br><span class="line">             <span class="hljs-comment">// Acquire clustered manager</span></span><br><span class="line">             Manager contextManager = <span class="hljs-keyword">null</span>;</span><br><span class="line">             <span class="hljs-keyword">if</span> (manager == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (log.isDebugEnabled()) &#123;</span><br><span class="line">                     log.debug(sm.getString(<span class="hljs-string">"standardContext.cluster.noManager"</span>,</span><br><span class="line">                             Boolean.valueOf((getCluster() != <span class="hljs-keyword">null</span>)),</span><br><span class="line">                             Boolean.valueOf(distributable)));</span><br><span class="line">                 &#125;</span><br><span class="line">                 <span class="hljs-keyword">if</span> ( (getCluster() != <span class="hljs-keyword">null</span>) &amp;&amp; distributable) &#123;</span><br><span class="line">                     <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                         contextManager = getCluster().createManager(getName());</span><br><span class="line">                     &#125; <span class="hljs-keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">                         log.error(<span class="hljs-string">"standardContext.clusterFail"</span>, ex);</span><br><span class="line">                         ok = <span class="hljs-keyword">false</span>;</span><br><span class="line">                     &#125;</span><br><span class="line">                 &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">                     contextManager = <span class="hljs-keyword">new</span> StandardManager();</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125; </span><br><span class="line">             </span><br><span class="line">             <span class="hljs-comment">// Configure default manager if none was specified</span></span><br><span class="line">             <span class="hljs-keyword">if</span> (contextManager != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (log.isDebugEnabled()) &#123;</span><br><span class="line">                     log.debug(sm.getString(<span class="hljs-string">"standardContext.manager"</span>,</span><br><span class="line">                             contextManager.getClass().getName()));</span><br><span class="line">                 &#125;</span><br><span class="line">                 setManager(contextManager);</span><br><span class="line">             &#125;</span><br><span class="line"></span><br><span class="line">             <span class="hljs-keyword">if</span> (manager!=<span class="hljs-keyword">null</span> &amp;&amp; (getCluster() != <span class="hljs-keyword">null</span>) &amp;&amp; distributable) &#123;</span><br><span class="line">                 <span class="hljs-comment">//let the cluster know that there is a context that is distributable</span></span><br><span class="line">                 <span class="hljs-comment">//and that it has its own manager</span></span><br><span class="line">                 getCluster().registerManager(manager);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">     &#125; <span class="hljs-keyword">finally</span> &#123;</span><br><span class="line">         <span class="hljs-comment">// Unbinding thread</span></span><br><span class="line">         unbindThread(oldCCL);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (!getConfigured()) &#123;</span><br><span class="line">         log.error( <span class="hljs-string">"Error getConfigured"</span>);</span><br><span class="line">         ok = <span class="hljs-keyword">false</span>;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// We put the resources into the servlet context</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (ok)</span><br><span class="line">         getServletContext().setAttribute</span><br><span class="line">             (Globals.RESOURCES_ATTR, getResources());</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Initialize associated mapper</span></span><br><span class="line">     mapper.setContext(getPath(), welcomeFiles, resources);</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Binding thread</span></span><br><span class="line">     oldCCL = bindThread();</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (ok ) &#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (getInstanceManager() == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">             javax.naming.Context context = <span class="hljs-keyword">null</span>;</span><br><span class="line">             <span class="hljs-keyword">if</span> (isUseNaming() &amp;&amp; getNamingContextListener() != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">                 context = getNamingContextListener().getEnvContext();</span><br><span class="line">             &#125;</span><br><span class="line">             Map&lt;String, Map&lt;String, String&gt;&gt; injectionMap = buildInjectionMap(</span><br><span class="line">                     getIgnoreAnnotations() ? <span class="hljs-keyword">new</span> NamingResources(): getNamingResources());</span><br><span class="line">             setInstanceManager(<span class="hljs-keyword">new</span> DefaultInstanceManager(context,</span><br><span class="line">                     injectionMap, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.getClass().getClassLoader()));</span><br><span class="line">             getServletContext().setAttribute(</span><br><span class="line">                     InstanceManager.class.getName(), getInstanceManager());</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">         <span class="hljs-comment">// Create context attributes that will be required</span></span><br><span class="line">         <span class="hljs-keyword">if</span> (ok) &#123;</span><br><span class="line">             getServletContext().setAttribute(</span><br><span class="line">                     JarScanner.class.getName(), getJarScanner());</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-comment">// Set up the context init params</span></span><br><span class="line">         mergeParameters();</span><br><span class="line"></span><br><span class="line">         <span class="hljs-comment">// Call ServletContainerInitializers</span></span><br><span class="line">         <span class="hljs-keyword">for</span> (Map.Entry&lt;ServletContainerInitializer, Set&lt;Class&lt;?&gt;&gt;&gt; entry :</span><br><span class="line">             initializers.entrySet()) &#123;</span><br><span class="line">             <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                 entry.getKey().onStartup(entry.getValue(),</span><br><span class="line">                         getServletContext());</span><br><span class="line">             &#125; <span class="hljs-keyword">catch</span> (ServletException e) &#123;</span><br><span class="line">                 log.error(sm.getString(<span class="hljs-string">"standardContext.sciFail"</span>), e);</span><br><span class="line">                 ok = <span class="hljs-keyword">false</span>;</span><br><span class="line">                 <span class="hljs-keyword">break</span>;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-comment">// Configure and call application event listeners</span></span><br><span class="line">         <span class="hljs-keyword">if</span> (ok) &#123;</span><br><span class="line">             <span class="hljs-keyword">if</span> (!listenerStart()) &#123;</span><br><span class="line">                 log.error( <span class="hljs-string">"Error listenerStart"</span>);</span><br><span class="line">                 ok = <span class="hljs-keyword">false</span>;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">             <span class="hljs-comment">// Start manager</span></span><br><span class="line">             <span class="hljs-keyword">if</span> ((manager != <span class="hljs-keyword">null</span>) &amp;&amp; (manager <span class="hljs-keyword">instanceof</span> Lifecycle)) &#123;</span><br><span class="line">                 ((Lifecycle) getManager()).start();</span><br><span class="line">             &#125;</span><br><span class="line">         &#125; <span class="hljs-keyword">catch</span>(Exception e) &#123;</span><br><span class="line">             log.error(<span class="hljs-string">"Error manager.start()"</span>, e);</span><br><span class="line">             ok = <span class="hljs-keyword">false</span>;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-comment">// Configure and call application filters</span></span><br><span class="line">         <span class="hljs-keyword">if</span> (ok) &#123;</span><br><span class="line">             <span class="hljs-keyword">if</span> (!filterStart()) &#123;</span><br><span class="line">                 log.error(<span class="hljs-string">"Error filterStart"</span>);</span><br><span class="line">                 ok = <span class="hljs-keyword">false</span>;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         <span class="hljs-comment">// Load and initialize all "load on startup" servlets</span></span><br><span class="line">         <span class="hljs-keyword">if</span> (ok) &#123;</span><br><span class="line">             loadOnStartup(findChildren());</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         <span class="hljs-comment">// Start ContainerBackgroundProcessor thread</span></span><br><span class="line">         <span class="hljs-keyword">super</span>.threadStart();</span><br><span class="line">     &#125; <span class="hljs-keyword">finally</span> &#123;</span><br><span class="line">         <span class="hljs-comment">// Unbinding thread</span></span><br><span class="line">         unbindThread(oldCCL);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Set available status depending upon startup success</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (ok) &#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">             log.debug(<span class="hljs-string">"Starting completed"</span>);</span><br><span class="line">     &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">         log.error(sm.getString(<span class="hljs-string">"standardContext.startFailed"</span>, getName()));</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     startTime=System.currentTimeMillis();</span><br><span class="line">     </span><br><span class="line">     <span class="hljs-comment">// Send j2ee.state.running notification </span></span><br><span class="line">     <span class="hljs-keyword">if</span> (ok &amp;&amp; (<span class="hljs-keyword">this</span>.getObjectName() != <span class="hljs-keyword">null</span>)) &#123;</span><br><span class="line">         Notification notification = </span><br><span class="line">             <span class="hljs-keyword">new</span> Notification(<span class="hljs-string">"j2ee.state.running"</span>, <span class="hljs-keyword">this</span>.getObjectName(),</span><br><span class="line">                              sequenceNumber.getAndIncrement());</span><br><span class="line">         broadcaster.sendNotification(notification);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Close all JARs right away to avoid always opening a peak number </span></span><br><span class="line">     <span class="hljs-comment">// of files on startup</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (getLoader() <span class="hljs-keyword">instanceof</span> WebappLoader) &#123;</span><br><span class="line">         ((WebappLoader) getLoader()).closeJARs(<span class="hljs-keyword">true</span>);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Reinitializing if something went wrong</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (!ok) &#123;</span><br><span class="line">         setState(LifecycleState.FAILED);</span><br><span class="line">     &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">         setState(LifecycleState.STARTING);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>标注1的代码：在<code>StandardContext</code>启动的时候，会创建webapploader，创建webapploader的时候会将<code>getParentClassLoader()</code>返回的结果（这里返回的其实就是sharedLoader）赋值给自己的<code>parentClassLoader</code>变量。</li>
<li>标注2的代码：调用到<code>Webapploader#start()</code>，因为WebappLoader符合Tomcat组件生命周期管理的模板方法模式，因此会调用到它的<code>startInternal()</code>。</li>
</ul>
<p>接下来就来看看<code>WebappLoader#startInternal()</code>。<br><strong>org.apache.catalina.loader.WebappLoader#startInternal()</strong><br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">  * Start associated &#123;<span class="hljs-doctag">@link</span> ClassLoader&#125; and implement the requirements</span></span><br><span class="line"><span class="hljs-comment">  * of &#123;<span class="hljs-doctag">@link</span> org.apache.catalina.util.LifecycleBase#startInternal()&#125;.</span></span><br><span class="line"><span class="hljs-comment">  *</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@exception</span> LifecycleException if this component detects a fatal error</span></span><br><span class="line"><span class="hljs-comment">  *  that prevents this component from being used</span></span><br><span class="line"><span class="hljs-comment">  */</span></span><br><span class="line"> <span class="hljs-meta">@Override</span></span><br><span class="line"> <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">startInternal</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> LifecycleException </span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">         log.debug(sm.getString(<span class="hljs-string">"webappLoader.starting"</span>));</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (container.getResources() == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">         log.info(<span class="hljs-string">"No resources for "</span> + container);</span><br><span class="line">         setState(LifecycleState.STARTING);</span><br><span class="line">         <span class="hljs-keyword">return</span>;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Register a stream handler factory for the JNDI protocol</span></span><br><span class="line">     URLStreamHandlerFactory streamHandlerFactory =</span><br><span class="line">             DirContextURLStreamHandlerFactory.getInstance();</span><br><span class="line">     <span class="hljs-keyword">if</span> (first) &#123;</span><br><span class="line">         first = <span class="hljs-keyword">false</span>;</span><br><span class="line">         <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">             URL.setURLStreamHandlerFactory(streamHandlerFactory);</span><br><span class="line">         &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;</span><br><span class="line">             <span class="hljs-comment">// Log and continue anyway, this is not critical</span></span><br><span class="line">             log.error(<span class="hljs-string">"Error registering jndi stream handler"</span>, e);</span><br><span class="line">         &#125; <span class="hljs-keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">             ExceptionUtils.handleThrowable(t);</span><br><span class="line">             <span class="hljs-comment">// This is likely a dual registration</span></span><br><span class="line">             log.info(<span class="hljs-string">"Dual registration of jndi stream handler: "</span></span><br><span class="line">                      + t.getMessage());</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Construct a class loader based on our current repositories list</span></span><br><span class="line">     <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">         <span class="hljs-comment">// 1</span></span><br><span class="line">         classLoader = createClassLoader();</span><br><span class="line">         classLoader.setResources(container.getResources());</span><br><span class="line">         classLoader.setDelegate(<span class="hljs-keyword">this</span>.delegate);</span><br><span class="line">         classLoader.setSearchExternalFirst(searchExternalFirst);</span><br><span class="line">         <span class="hljs-keyword">if</span> (container <span class="hljs-keyword">instanceof</span> StandardContext) &#123;</span><br><span class="line">             classLoader.setAntiJARLocking(</span><br><span class="line">                     ((StandardContext) container).getAntiJARLocking());</span><br><span class="line">             classLoader.setClearReferencesStatic(</span><br><span class="line">                     ((StandardContext) container).getClearReferencesStatic());</span><br><span class="line">             classLoader.setClearReferencesStopThreads(</span><br><span class="line">                     ((StandardContext) container).getClearReferencesStopThreads());</span><br><span class="line">             classLoader.setClearReferencesStopTimerThreads(</span><br><span class="line">                     ((StandardContext) container).getClearReferencesStopTimerThreads());</span><br><span class="line">             classLoader.setClearReferencesHttpClientKeepAliveThread(</span><br><span class="line">                     ((StandardContext) container).getClearReferencesHttpClientKeepAliveThread());</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; repositories.length; i++) &#123;</span><br><span class="line">             classLoader.addRepository(repositories[i]);</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-comment">// Configure our repositories</span></span><br><span class="line">         setRepositories();</span><br><span class="line">         setClassPath();</span><br><span class="line"></span><br><span class="line">         setPermissions();</span><br><span class="line"></span><br><span class="line">         ((Lifecycle) classLoader).start();</span><br><span class="line"></span><br><span class="line">         <span class="hljs-comment">// Binding the Webapp class loader to the directory context</span></span><br><span class="line">         DirContextURLStreamHandler.bind(classLoader,</span><br><span class="line">                 <span class="hljs-keyword">this</span>.container.getResources());</span><br><span class="line"></span><br><span class="line">         StandardContext ctx=(StandardContext)container;</span><br><span class="line">         String contextName = ctx.getName();</span><br><span class="line">         <span class="hljs-keyword">if</span> (!contextName.startsWith(<span class="hljs-string">"/"</span>)) &#123;</span><br><span class="line">             contextName = <span class="hljs-string">"/"</span> + contextName;</span><br><span class="line">         &#125;</span><br><span class="line">         ObjectName cloname = <span class="hljs-keyword">new</span> ObjectName</span><br><span class="line">             (MBeanUtils.getDomain(ctx) + <span class="hljs-string">":type=WebappClassLoader,context="</span></span><br><span class="line">              + contextName + <span class="hljs-string">",host="</span> + ctx.getParent().getName());</span><br><span class="line">         Registry.getRegistry(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>)</span><br><span class="line">             .registerComponent(classLoader, cloname, <span class="hljs-keyword">null</span>);</span><br><span class="line"></span><br><span class="line">     &#125; <span class="hljs-keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">         t = ExceptionUtils.unwrapInvocationTargetException(t);</span><br><span class="line">         ExceptionUtils.handleThrowable(t);</span><br><span class="line">         log.error( <span class="hljs-string">"LifecycleException "</span>, t );</span><br><span class="line">         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> LifecycleException(<span class="hljs-string">"start: "</span>, t);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     setState(LifecycleState.STARTING);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>标注1的代码：调用<code>createClassLoader()</code>创建一个classLoader。</li>
</ul>
<p><strong>org.apache.catalina.loader.WebappLoader#createClassLoader()</strong><br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">  * Create associated classLoader.</span></span><br><span class="line"><span class="hljs-comment">  */</span></span><br><span class="line"> <span class="hljs-function"><span class="hljs-keyword">private</span> WebappClassLoader <span class="hljs-title">createClassLoader</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function">     <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">     Class&lt;?&gt; clazz = Class.forName(loaderClass);</span><br><span class="line">     WebappClassLoader classLoader = <span class="hljs-keyword">null</span>;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (parentClassLoader == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">         parentClassLoader = container.getParentClassLoader();</span><br><span class="line">     &#125;</span><br><span class="line">     Class&lt;?&gt;[] argTypes = &#123; ClassLoader.class &#125;;</span><br><span class="line">     Object[] args = &#123; parentClassLoader &#125;;</span><br><span class="line">     Constructor&lt;?&gt; constr = clazz.getConstructor(argTypes);</span><br><span class="line">     classLoader = (WebappClassLoader) constr.newInstance(args);</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">return</span> classLoader;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>在上面的代码里面，classLoader是WebappLoader的实例变量，其值为<code>org.apache.catalina.loader.WebappClassLoader</code>，那么上面的代码其实就是通过反射调用WebappClassLoader的构造函数，然后传递sharedLoader作为其父亲加载器。<br>代码阅读到这里，已经基本清楚Tomcat中ClassLoader的总体结构，总结如下： 在Tomcat存在common，cataina，shared三个公共的classloader，默认情况下，这三个classloader其实是同一个，都是<code>common classloader</code>，而针对每个webapp，也就是context（对应代码中的<code>StandardContext</code>类），WebappClassLoader为每个应用创建类加载器实例。<br>上面的描述，我们可以通过下图形象化的描述。<br><img src="./tomcat-5-1.jpg" alt><br>清楚Tomcat总体的ClassLoader结构以后，进一步来分析一下WebAppClassLoader的代码，Java的ClassLoader机制有parent-first的机制，而这种机制是在<code>loadClass()</code>保证的，一般情况下，只需要重写<code>findClass()</code>就好，而对于WebAppClassLoader，通过查看源代码，发现<code>loadClass()</code>和<code>findClass()</code>都进行重写，那么首先就来看看它的<code>loadClass()</code>，它的代码如下。<br><strong>org.apache.catalina.loader.WebappClassLoader#loadClass()</strong><br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">  * Load the class with the specified name, searching using the following</span></span><br><span class="line"><span class="hljs-comment">  * algorithm until it finds and returns the class.  If the class cannot</span></span><br><span class="line"><span class="hljs-comment">  * be found, returns &lt;code&gt;ClassNotFoundException&lt;/code&gt;.</span></span><br><span class="line"><span class="hljs-comment">  * &lt;ul&gt;</span></span><br><span class="line"><span class="hljs-comment">  * &lt;li&gt;Call &lt;code&gt;findLoadedClass(String)&lt;/code&gt; to check if the</span></span><br><span class="line"><span class="hljs-comment">  *     class has already been loaded.  If it has, the same</span></span><br><span class="line"><span class="hljs-comment">  *     &lt;code&gt;Class&lt;/code&gt; object is returned.&lt;/li&gt;</span></span><br><span class="line"><span class="hljs-comment">  * &lt;li&gt;If the &lt;code&gt;delegate&lt;/code&gt; property is set to &lt;code&gt;true&lt;/code&gt;,</span></span><br><span class="line"><span class="hljs-comment">  *     call the &lt;code&gt;loadClass()&lt;/code&gt; method of the parent class</span></span><br><span class="line"><span class="hljs-comment">  *     loader, if any.&lt;/li&gt;</span></span><br><span class="line"><span class="hljs-comment">  * &lt;li&gt;Call &lt;code&gt;findClass()&lt;/code&gt; to find this class in our locally</span></span><br><span class="line"><span class="hljs-comment">  *     defined repositories.&lt;/li&gt;</span></span><br><span class="line"><span class="hljs-comment">  * &lt;li&gt;Call the &lt;code&gt;loadClass()&lt;/code&gt; method of our parent</span></span><br><span class="line"><span class="hljs-comment">  *     class loader, if any.&lt;/li&gt;</span></span><br><span class="line"><span class="hljs-comment">  * &lt;/ul&gt;</span></span><br><span class="line"><span class="hljs-comment">  * If the class was found using the above steps, and the</span></span><br><span class="line"><span class="hljs-comment">  * &lt;code&gt;resolve&lt;/code&gt; flag is &lt;code&gt;true&lt;/code&gt;, this method will then</span></span><br><span class="line"><span class="hljs-comment">  * call &lt;code&gt;resolveClass(Class)&lt;/code&gt; on the resulting Class object.</span></span><br><span class="line"><span class="hljs-comment">  *</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@param</span> name Name of the class to be loaded</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@param</span> resolve If &lt;code&gt;true&lt;/code&gt; then resolve the class</span></span><br><span class="line"><span class="hljs-comment">  *</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@exception</span> ClassNotFoundException if the class was not found</span></span><br><span class="line"><span class="hljs-comment">  */</span></span><br><span class="line"> <span class="hljs-meta">@Override</span></span><br><span class="line"> <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> Class&lt;?&gt; loadClass(String name, <span class="hljs-keyword">boolean</span> resolve)</span><br><span class="line">     <span class="hljs-keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">         log.debug(<span class="hljs-string">"loadClass("</span> + name + <span class="hljs-string">", "</span> + resolve + <span class="hljs-string">")"</span>);</span><br><span class="line">     Class&lt;?&gt; clazz = <span class="hljs-keyword">null</span>;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Log access to stopped classloader</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (!started) &#123;</span><br><span class="line">         <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalStateException();</span><br><span class="line">         &#125; <span class="hljs-keyword">catch</span> (IllegalStateException e) &#123;</span><br><span class="line">             log.info(sm.getString(<span class="hljs-string">"webappClassLoader.stopped"</span>, name), e);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// (0) Check our previously loaded local class cache</span></span><br><span class="line">     <span class="hljs-comment">// 1 </span></span><br><span class="line">     clazz = findLoadedClass0(name);</span><br><span class="line">     <span class="hljs-keyword">if</span> (clazz != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">             log.debug(<span class="hljs-string">"  Returning class from cache"</span>);</span><br><span class="line">         <span class="hljs-keyword">if</span> (resolve)</span><br><span class="line">             resolveClass(clazz);</span><br><span class="line">         <span class="hljs-keyword">return</span> (clazz);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// (0.1) Check our previously loaded class cache</span></span><br><span class="line">     <span class="hljs-comment">// 2</span></span><br><span class="line">     clazz = findLoadedClass(name);</span><br><span class="line">     <span class="hljs-keyword">if</span> (clazz != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">             log.debug(<span class="hljs-string">"  Returning class from cache"</span>);</span><br><span class="line">         <span class="hljs-keyword">if</span> (resolve)</span><br><span class="line">             resolveClass(clazz);</span><br><span class="line">         <span class="hljs-keyword">return</span> (clazz);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// (0.2) Try loading the class with the system class loader, to prevent</span></span><br><span class="line">     <span class="hljs-comment">//       the webapp from overriding J2SE classes</span></span><br><span class="line">     <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">         <span class="hljs-comment">// 3   </span></span><br><span class="line">         clazz = system.loadClass(name);</span><br><span class="line">         <span class="hljs-keyword">if</span> (clazz != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">             <span class="hljs-keyword">if</span> (resolve)</span><br><span class="line">                 resolveClass(clazz);</span><br><span class="line">             <span class="hljs-keyword">return</span> (clazz);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">         <span class="hljs-comment">// Ignore</span></span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// (0.5) Permission to access this class when using a SecurityManager</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (securityManager != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">         <span class="hljs-keyword">int</span> i = name.lastIndexOf(<span class="hljs-string">'.'</span>);</span><br><span class="line">         <span class="hljs-keyword">if</span> (i &gt;= <span class="hljs-number">0</span>) &#123;</span><br><span class="line">             <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                 securityManager.checkPackageAccess(name.substring(<span class="hljs-number">0</span>,i));</span><br><span class="line">             &#125; <span class="hljs-keyword">catch</span> (SecurityException se) &#123;</span><br><span class="line">                 String error = <span class="hljs-string">"Security Violation, attempt to use "</span> +</span><br><span class="line">                     <span class="hljs-string">"Restricted Class: "</span> + name;</span><br><span class="line">                 log.info(error, se);</span><br><span class="line">                 <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ClassNotFoundException(error, se);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="hljs-comment">// 4</span></span><br><span class="line">     <span class="hljs-keyword">boolean</span> delegateLoad = delegate || filter(name);</span><br><span class="line">     <span class="hljs-comment">// 5</span></span><br><span class="line">     <span class="hljs-comment">// (1) Delegate to our parent if requested</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (delegateLoad) &#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">             log.debug(<span class="hljs-string">"  Delegating to parent classloader1 "</span> + parent);</span><br><span class="line">         ClassLoader loader = parent;</span><br><span class="line">         <span class="hljs-keyword">if</span> (loader == <span class="hljs-keyword">null</span>)</span><br><span class="line">             loader = system;</span><br><span class="line">         <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">             clazz = Class.forName(name, <span class="hljs-keyword">false</span>, loader);</span><br><span class="line">             <span class="hljs-keyword">if</span> (clazz != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">                     log.debug(<span class="hljs-string">"  Loading class from parent"</span>);</span><br><span class="line">                 <span class="hljs-keyword">if</span> (resolve)</span><br><span class="line">                     resolveClass(clazz);</span><br><span class="line">                 <span class="hljs-keyword">return</span> (clazz);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">             <span class="hljs-comment">// Ignore</span></span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// (2) Search local repositories</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">         log.debug(<span class="hljs-string">"  Searching local repositories"</span>);</span><br><span class="line">     <span class="hljs-comment">// 6</span></span><br><span class="line">     <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">         clazz = findClass(name);</span><br><span class="line">         <span class="hljs-keyword">if</span> (clazz != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">             <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">                 log.debug(<span class="hljs-string">"  Loading class from local repository"</span>);</span><br><span class="line">             <span class="hljs-keyword">if</span> (resolve)</span><br><span class="line">                 resolveClass(clazz);</span><br><span class="line">             <span class="hljs-keyword">return</span> (clazz);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">         <span class="hljs-comment">// Ignore</span></span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// (3) Delegate to parent unconditionally</span></span><br><span class="line">     <span class="hljs-comment">// 7</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (!delegateLoad) &#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">             log.debug(<span class="hljs-string">"  Delegating to parent classloader at end: "</span> + parent);</span><br><span class="line">         ClassLoader loader = parent;</span><br><span class="line">         <span class="hljs-keyword">if</span> (loader == <span class="hljs-keyword">null</span>)</span><br><span class="line">             loader = system;</span><br><span class="line">         <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">             clazz = Class.forName(name, <span class="hljs-keyword">false</span>, loader);</span><br><span class="line">             <span class="hljs-keyword">if</span> (clazz != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">                     log.debug(<span class="hljs-string">"  Loading class from parent"</span>);</span><br><span class="line">                 <span class="hljs-keyword">if</span> (resolve)</span><br><span class="line">                     resolveClass(clazz);</span><br><span class="line">                 <span class="hljs-keyword">return</span> (clazz);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">             <span class="hljs-comment">// Ignore</span></span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ClassNotFoundException(name);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>标注1代码：首先从当前ClassLoader的本地缓存中加载类，如果找到则返回。</li>
<li>标注2代码：在本地缓存没有的情况下，调用<code>ClassLoader#findLoadedClass()</code>查看JVM是否已经加载过此类，如果已经加载则直接返回。</li>
<li>标注3代码：通过系统的来加载器加载此类，这里防止应用写的类覆盖J2SE的类，这句代码非常关键，如果不写的话，就会造成你自己写的类有可能会把J2SE的类给替换调，另外假如你写一个<code>javax.servlet.Servlet</code>类，放在当前应用的<code>WEB-INF/class</code>中，如果没有此句代码的保证，那么你自己写的类就会替换到Tomcat容器Lib中包含的类。</li>
<li>标注4代码：判断是否需要委托给父类加载器进行加载，delegate属性默认为false，那么delegatedLoad的值就取决于filter的返回值，<code>filter()</code>中根据包名来判断是否需要进行委托加载，默认情况下会返回false。因此<code>delegatedLoad = false</code>。</li>
<li>标注5代码：因为<code>delegatedLoad = false</code>，那么此时不会委托父加载器去加载，这里其实是没有遵循parent-first的加载机制。</li>
<li>标注6代码：调用<code>findClass()</code>在webapp级别进行加载。</li>
<li>标注7代码：如果还是没有加载到类，并且不采用委托机制的话，则通过父类加载器去加载。</li>
</ul>
<p>通过上面的描述，可以知道Tomcat在加载webapp级别的类的时候，默认是不遵守parent-first的，这样做的好处是更好的实现应用的隔离，但是坏处就是加大内存浪费，同样的类库要在不同的app中都要加载一份。<br>上面分析完loadClass，接着在来分析一下findClass。<br><strong>org.apache.catalina.loader.WebappClassLoader#findClass()</strong><br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">  * Find the specified class in our local repositories, if possible.  If</span></span><br><span class="line"><span class="hljs-comment">  * not found, throw &lt;code&gt;ClassNotFoundException&lt;/code&gt;.</span></span><br><span class="line"><span class="hljs-comment">  *</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@param</span> name Name of the class to be loaded</span></span><br><span class="line"><span class="hljs-comment">  *</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@exception</span> ClassNotFoundException if the class was not found</span></span><br><span class="line"><span class="hljs-comment">  */</span></span><br><span class="line"> <span class="hljs-meta">@Override</span></span><br><span class="line"> <span class="hljs-keyword">public</span> Class&lt;?&gt; findClass(String name) <span class="hljs-keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">         log.debug(<span class="hljs-string">"    findClass("</span> + name + <span class="hljs-string">")"</span>);</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Cannot load anything from local repositories if class loader is stopped</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (!started) &#123;</span><br><span class="line">         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ClassNotFoundException(name);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// (1) Permission to define this class when using a SecurityManager</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (securityManager != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">         <span class="hljs-keyword">int</span> i = name.lastIndexOf(<span class="hljs-string">'.'</span>);</span><br><span class="line">         <span class="hljs-keyword">if</span> (i &gt;= <span class="hljs-number">0</span>) &#123;</span><br><span class="line">             <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (log.isTraceEnabled())</span><br><span class="line">                     log.trace(<span class="hljs-string">"      securityManager.checkPackageDefinition"</span>);</span><br><span class="line">                 securityManager.checkPackageDefinition(name.substring(<span class="hljs-number">0</span>,i));</span><br><span class="line">             &#125; <span class="hljs-keyword">catch</span> (Exception se) &#123;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (log.isTraceEnabled())</span><br><span class="line">                     log.trace(<span class="hljs-string">"      --&gt;Exception--&gt;ClassNotFoundException"</span>, se);</span><br><span class="line">                 <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ClassNotFoundException(name, se);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Ask our superclass to locate this class, if possible</span></span><br><span class="line">     <span class="hljs-comment">// (throws ClassNotFoundException if it is not found)</span></span><br><span class="line">     Class&lt;?&gt; clazz = <span class="hljs-keyword">null</span>;</span><br><span class="line">     <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (log.isTraceEnabled())</span><br><span class="line">             log.trace(<span class="hljs-string">"      findClassInternal("</span> + name + <span class="hljs-string">")"</span>);</span><br><span class="line">         <span class="hljs-keyword">if</span> (hasExternalRepositories &amp;&amp; searchExternalFirst) &#123;</span><br><span class="line">             <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                 clazz = <span class="hljs-keyword">super</span>.findClass(name);</span><br><span class="line">             &#125; <span class="hljs-keyword">catch</span>(ClassNotFoundException cnfe) &#123;</span><br><span class="line">                 <span class="hljs-comment">// Ignore - will search internal repositories next</span></span><br><span class="line">             &#125; <span class="hljs-keyword">catch</span>(AccessControlException ace) &#123;</span><br><span class="line">                 log.warn(<span class="hljs-string">"WebappClassLoader.findClassInternal("</span> + name</span><br><span class="line">                         + <span class="hljs-string">") security exception: "</span> + ace.getMessage(), ace);</span><br><span class="line">                 <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ClassNotFoundException(name, ace);</span><br><span class="line">             &#125; <span class="hljs-keyword">catch</span> (RuntimeException e) &#123;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (log.isTraceEnabled())</span><br><span class="line">                     log.trace(<span class="hljs-string">"      --&gt;RuntimeException Rethrown"</span>, e);</span><br><span class="line">                 <span class="hljs-keyword">throw</span> e;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="hljs-keyword">if</span> ((clazz == <span class="hljs-keyword">null</span>)) &#123;</span><br><span class="line">             <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                 clazz = findClassInternal(name);</span><br><span class="line">             &#125; <span class="hljs-keyword">catch</span>(ClassNotFoundException cnfe) &#123;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (!hasExternalRepositories || searchExternalFirst) &#123;</span><br><span class="line">                     <span class="hljs-keyword">throw</span> cnfe;</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125; <span class="hljs-keyword">catch</span>(AccessControlException ace) &#123;</span><br><span class="line">                 log.warn(<span class="hljs-string">"WebappClassLoader.findClassInternal("</span> + name</span><br><span class="line">                         + <span class="hljs-string">") security exception: "</span> + ace.getMessage(), ace);</span><br><span class="line">                 <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ClassNotFoundException(name, ace);</span><br><span class="line">             &#125; <span class="hljs-keyword">catch</span> (RuntimeException e) &#123;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (log.isTraceEnabled())</span><br><span class="line">                     log.trace(<span class="hljs-string">"      --&gt;RuntimeException Rethrown"</span>, e);</span><br><span class="line">                 <span class="hljs-keyword">throw</span> e;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="hljs-keyword">if</span> ((clazz == <span class="hljs-keyword">null</span>) &amp;&amp; hasExternalRepositories &amp;&amp; !searchExternalFirst) &#123;</span><br><span class="line">             <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                 clazz = <span class="hljs-keyword">super</span>.findClass(name);</span><br><span class="line">             &#125; <span class="hljs-keyword">catch</span>(AccessControlException ace) &#123;</span><br><span class="line">                 log.warn(<span class="hljs-string">"WebappClassLoader.findClassInternal("</span> + name</span><br><span class="line">                         + <span class="hljs-string">") security exception: "</span> + ace.getMessage(), ace);</span><br><span class="line">                 <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ClassNotFoundException(name, ace);</span><br><span class="line">             &#125; <span class="hljs-keyword">catch</span> (RuntimeException e) &#123;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (log.isTraceEnabled())</span><br><span class="line">                     log.trace(<span class="hljs-string">"      --&gt;RuntimeException Rethrown"</span>, e);</span><br><span class="line">                 <span class="hljs-keyword">throw</span> e;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="hljs-keyword">if</span> (clazz == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">             <span class="hljs-keyword">if</span> (log.isDebugEnabled())</span><br><span class="line">                 log.debug(<span class="hljs-string">"    --&gt; Returning ClassNotFoundException"</span>);</span><br><span class="line">             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ClassNotFoundException(name);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">         <span class="hljs-keyword">if</span> (log.isTraceEnabled())</span><br><span class="line">             log.trace(<span class="hljs-string">"    --&gt; Passing on ClassNotFoundException"</span>);</span><br><span class="line">         <span class="hljs-keyword">throw</span> e;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-comment">// Return the class we have located</span></span><br><span class="line">     <span class="hljs-keyword">if</span> (log.isTraceEnabled())</span><br><span class="line">         log.debug(<span class="hljs-string">"      Returning class "</span> + clazz);</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (log.isTraceEnabled()) &#123;</span><br><span class="line">         ClassLoader cl;</span><br><span class="line">         <span class="hljs-keyword">if</span> (Globals.IS_SECURITY_ENABLED)&#123;</span><br><span class="line">             cl = AccessController.doPrivileged(</span><br><span class="line">                 <span class="hljs-keyword">new</span> PrivilegedGetClassLoader(clazz));</span><br><span class="line">         &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">             cl = clazz.getClassLoader();</span><br><span class="line">         &#125;</span><br><span class="line">         log.debug(<span class="hljs-string">"      Loaded by "</span> + cl.toString());</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="hljs-keyword">return</span> (clazz);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>通过分析findClass的代码，最终会调用<code>org.apache.catalina.loader.WebappClassLoader#findClassInternal()</code>，那我们就来分析一下它的代码。<br><strong>org.apache.catalina.loader.WebappClassLoader#findClassInternal()</strong><br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">  * Find specified class in local repositories.</span></span><br><span class="line"><span class="hljs-comment">  *</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@return</span> the loaded class, or null if the class isn't found</span></span><br><span class="line"><span class="hljs-comment">  */</span></span><br><span class="line"> <span class="hljs-keyword">protected</span> Class&lt;?&gt; findClassInternal(String name)</span><br><span class="line">     <span class="hljs-keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (!validate(name))</span><br><span class="line">         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ClassNotFoundException(name);</span><br><span class="line"></span><br><span class="line">     String tempPath = name.replace(<span class="hljs-string">'.'</span>, <span class="hljs-string">'/'</span>);</span><br><span class="line">     String classPath = tempPath + <span class="hljs-string">".class"</span>;</span><br><span class="line"></span><br><span class="line">     ResourceEntry entry = <span class="hljs-keyword">null</span>;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (securityManager != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">         PrivilegedAction&lt;ResourceEntry&gt; dp =</span><br><span class="line">             <span class="hljs-keyword">new</span> PrivilegedFindResourceByName(name, classPath);</span><br><span class="line">         entry = AccessController.doPrivileged(dp);</span><br><span class="line">     &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">         <span class="hljs-comment">// 1 </span></span><br><span class="line">         entry = findResourceInternal(name, classPath);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">if</span> (entry == <span class="hljs-keyword">null</span>)</span><br><span class="line">         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ClassNotFoundException(name);</span><br><span class="line"></span><br><span class="line">     Class&lt;?&gt; clazz = entry.loadedClass;</span><br><span class="line">     <span class="hljs-keyword">if</span> (clazz != <span class="hljs-keyword">null</span>)</span><br><span class="line">         <span class="hljs-keyword">return</span> clazz;</span><br><span class="line"></span><br><span class="line">     <span class="hljs-keyword">synchronized</span> (<span class="hljs-keyword">this</span>) &#123;</span><br><span class="line">         clazz = entry.loadedClass;</span><br><span class="line">         <span class="hljs-keyword">if</span> (clazz != <span class="hljs-keyword">null</span>)</span><br><span class="line">             <span class="hljs-keyword">return</span> clazz;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-keyword">if</span> (entry.binaryContent == <span class="hljs-keyword">null</span>)</span><br><span class="line">             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ClassNotFoundException(name);</span><br><span class="line"></span><br><span class="line">         <span class="hljs-comment">// Looking up the package</span></span><br><span class="line">         String packageName = <span class="hljs-keyword">null</span>;</span><br><span class="line">         <span class="hljs-keyword">int</span> pos = name.lastIndexOf(<span class="hljs-string">'.'</span>);</span><br><span class="line">         <span class="hljs-keyword">if</span> (pos != -<span class="hljs-number">1</span>)</span><br><span class="line">             packageName = name.substring(<span class="hljs-number">0</span>, pos);</span><br><span class="line"></span><br><span class="line">         Package pkg = <span class="hljs-keyword">null</span>;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-keyword">if</span> (packageName != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">             pkg = getPackage(packageName);</span><br><span class="line">             <span class="hljs-comment">// Define the package (if null)</span></span><br><span class="line">             <span class="hljs-keyword">if</span> (pkg == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">                 <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                     <span class="hljs-keyword">if</span> (entry.manifest == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">                         definePackage(packageName, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>,</span><br><span class="line">                                 <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);</span><br><span class="line">                     &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">                         definePackage(packageName, entry.manifest,</span><br><span class="line">                                 entry.codeBase);</span><br><span class="line">                     &#125;</span><br><span class="line">                 &#125; <span class="hljs-keyword">catch</span> (IllegalArgumentException e) &#123;</span><br><span class="line">                     <span class="hljs-comment">// Ignore: normal error due to dual definition of package</span></span><br><span class="line">                 &#125;</span><br><span class="line">                 pkg = getPackage(packageName);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-keyword">if</span> (securityManager != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">             <span class="hljs-comment">// Checking sealing</span></span><br><span class="line">             <span class="hljs-keyword">if</span> (pkg != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">                 <span class="hljs-keyword">boolean</span> sealCheck = <span class="hljs-keyword">true</span>;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (pkg.isSealed()) &#123;</span><br><span class="line">                     sealCheck = pkg.isSealed(entry.codeBase);</span><br><span class="line">                 &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">                     sealCheck = (entry.manifest == <span class="hljs-keyword">null</span>)</span><br><span class="line">                         || !isPackageSealed(packageName, entry.manifest);</span><br><span class="line">                 &#125;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (!sealCheck)</span><br><span class="line">                     <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> SecurityException</span><br><span class="line">                         (<span class="hljs-string">"Sealing violation loading "</span> + name + <span class="hljs-string">" : Package "</span></span><br><span class="line">                          + packageName + <span class="hljs-string">" is sealed."</span>);</span><br><span class="line">             &#125;</span><br><span class="line"></span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">             <span class="hljs-comment">// 2</span></span><br><span class="line">             clazz = defineClass(name, entry.binaryContent, <span class="hljs-number">0</span>,</span><br><span class="line">                     entry.binaryContent.length,</span><br><span class="line">                     <span class="hljs-keyword">new</span> CodeSource(entry.codeBase, entry.certificates));</span><br><span class="line">         &#125; <span class="hljs-keyword">catch</span> (UnsupportedClassVersionError ucve) &#123;</span><br><span class="line">             <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> UnsupportedClassVersionError(</span><br><span class="line">                     ucve.getLocalizedMessage() + <span class="hljs-string">" "</span> +</span><br><span class="line">                     sm.getString(<span class="hljs-string">"webappClassLoader.wrongVersion"</span>,</span><br><span class="line">                             name));</span><br><span class="line">         &#125;</span><br><span class="line">         entry.loadedClass = clazz;</span><br><span class="line">         entry.binaryContent = <span class="hljs-keyword">null</span>;</span><br><span class="line">         entry.source = <span class="hljs-keyword">null</span>;</span><br><span class="line">         entry.codeBase = <span class="hljs-keyword">null</span>;</span><br><span class="line">         entry.manifest = <span class="hljs-keyword">null</span>;</span><br><span class="line">         entry.certificates = <span class="hljs-keyword">null</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="hljs-keyword">return</span> clazz;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>标注1代码：通过名称去当前webappClassLoader的仓库中查找对应的类文件。</li>
<li>标注2代码：将找到的类文件通过defineClass转变为JVM可以识别的Class对象返回。</li>
</ul>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/Tomcat/">Tomcat</a>, <a class="has-link-grey -link" href="/tags/开源项目/">开源项目</a>
                </div>
            </div>
        </div>
        
        
        
        <div class="social-share"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css">
<script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3>
        <div class="buttons is-centered">
            
                
<a class="button is-info donate">
    <span class="icon is-small">
        <i class="fab fa-alipay"></i>
    </span>
    <span>支付宝</span>
    <div class="qrcode"><img src="/images/alipaycode.jpg" alt="支付宝"></div>
</a>

                
                
<a class="button is-success donate">
    <span class="icon is-small">
        <i class="fab fa-weixin"></i>
    </span>
    <span>微信</span>
    <div class="qrcode"><img src="/images/wxcode.png" alt="微信"></div>
</a>

                
        </div>
    </div>
</div>



<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/Tomcat-6/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">Tomcat（六）Session管理机制</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/Tomcat-4/">
                <span class="level-item">Tomcat（四）请求处理流程</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">评论</h3>
        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.min.js"></script>
<script>
    var gitalk = new Gitalk({
        clientID: 'a70be08270bc7c083f83',
        clientSecret: '1b08252e3cf4b0c29b5f52f431ad9a54eef0a74a',
        id: '97946640c9b410669fae26dbf4b40b7e',
        repo: 'joeskye1701.github.io',
        owner: 'joeskye1701',
        admin: "joeskye1701"
    })
    gitalk.render('comment-container')
</script>

    </div>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/thank-you-kobe.jpg" alt="Joe">
                    
                    
                    <p class="is-size-4 is-block">
                        Joe
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Developer &amp; Designer
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Shenzhen, China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        129
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        26
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        54
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/joeskye1701">
                关注我</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="https://github.com/joeskye1701">
                
                <i class="fab fa-github"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="http://wss.xxyseo.cn/" target="_blank">
                    <span class="level-left">
                        <span class="level-item">西乡大佬</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">wss.xxyseo.cn</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Android/">
            <span class="level-start">
                <span class="level-item">Android</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JDK6-源码/">
            <span class="level-start">
                <span class="level-item">JDK6 源码</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">18</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JDK7-源码/">
            <span class="level-start">
                <span class="level-item">JDK7 源码</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JDK8-源码/">
            <span class="level-start">
                <span class="level-item">JDK8 源码</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JMM/">
            <span class="level-start">
                <span class="level-item">JMM</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JVM/">
            <span class="level-start">
                <span class="level-item">JVM</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">10</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Java/">
            <span class="level-start">
                <span class="level-item">Java</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">20</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Linux/">
            <span class="level-start">
                <span class="level-item">Linux</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/MyBatis/">
            <span class="level-start">
                <span class="level-item">MyBatis</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/MySQL/">
            <span class="level-start">
                <span class="level-item">MySQL</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Redis/">
            <span class="level-start">
                <span class="level-item">Redis</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Spring/">
            <span class="level-start">
                <span class="level-item">Spring</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Tomcat/">
            <span class="level-start">
                <span class="level-item">Tomcat</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">7</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/书/">
            <span class="level-start">
                <span class="level-item">书</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/多线程/">
            <span class="level-start">
                <span class="level-item">多线程</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/并发/">
            <span class="level-start">
                <span class="level-item">并发</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/开源项目/">
            <span class="level-start">
                <span class="level-item">开源项目</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/数学/">
            <span class="level-start">
                <span class="level-item">数学</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/数据库/">
            <span class="level-start">
                <span class="level-item">数据库</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/数据结构/">
            <span class="level-start">
                <span class="level-item">数据结构</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/日语/">
            <span class="level-start">
                <span class="level-item">日语</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/机器学习/">
            <span class="level-start">
                <span class="level-item">机器学习</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/算法/">
            <span class="level-start">
                <span class="level-item">算法</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">23</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/计算机基础/">
            <span class="level-start">
                <span class="level-item">计算机基础</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/设计模式/">
            <span class="level-start">
                <span class="level-item">设计模式</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/面试/">
            <span class="level-start">
                <span class="level-item">面试</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Centos/" style="font-size: 11.82px;">Centos</a> <a href="/tags/Effect-Java/" style="font-size: 10.91px;">Effect Java</a> <a href="/tags/JDK6-源码/" style="font-size: 18.18px;">JDK6 源码</a> <a href="/tags/JDK7-源码/" style="font-size: 14.55px;">JDK7 源码</a> <a href="/tags/JDK8-源码/" style="font-size: 10px;">JDK8 源码</a> <a href="/tags/JMM/" style="font-size: 15.45px;">JMM</a> <a href="/tags/JVM/" style="font-size: 16.36px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Linux/" style="font-size: 12.73px;">Linux</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/Mongodb/" style="font-size: 10px;">Mongodb</a> <a href="/tags/MyBatis/" style="font-size: 11.82px;">MyBatis</a> <a href="/tags/MySQL/" style="font-size: 10.91px;">MySQL</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Spring/" style="font-size: 12.73px;">Spring</a> <a href="/tags/Think-In-Java/" style="font-size: 10px;">Think In Java</a> <a href="/tags/Tomcat/" style="font-size: 15.45px;">Tomcat</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/一致性哈希算法/" style="font-size: 10px;">一致性哈希算法</a> <a href="/tags/书/" style="font-size: 11.82px;">书</a> <a href="/tags/倒排索引/" style="font-size: 10px;">倒排索引</a> <a href="/tags/内存泄漏/" style="font-size: 10px;">内存泄漏</a> <a href="/tags/分支限界算法/" style="font-size: 10.91px;">分支限界算法</a> <a href="/tags/分治法/" style="font-size: 10px;">分治法</a> <a href="/tags/分治算法/" style="font-size: 10px;">分治算法</a> <a href="/tags/分词算法/" style="font-size: 10.91px;">分词算法</a> <a href="/tags/动态规划/" style="font-size: 10px;">动态规划</a> <a href="/tags/动态规划算法/" style="font-size: 10.91px;">动态规划算法</a> <a href="/tags/华为/" style="font-size: 10px;">华为</a> <a href="/tags/回溯算法/" style="font-size: 12.73px;">回溯算法</a> <a href="/tags/多线程/" style="font-size: 10.91px;">多线程</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/并发/" style="font-size: 13.64px;">并发</a> <a href="/tags/开源项目/" style="font-size: 17.27px;">开源项目</a> <a href="/tags/手机游戏/" style="font-size: 10px;">手机游戏</a> <a href="/tags/排序算法/" style="font-size: 10px;">排序算法</a> <a href="/tags/推荐/" style="font-size: 10px;">推荐</a> <a href="/tags/散列表/" style="font-size: 10px;">散列表</a> <a href="/tags/数学/" style="font-size: 10px;">数学</a> <a href="/tags/数据库/" style="font-size: 10.91px;">数据库</a> <a href="/tags/数据结构/" style="font-size: 13.64px;">数据结构</a> <a href="/tags/日语/" style="font-size: 10px;">日语</a> <a href="/tags/最优路径算法/" style="font-size: 10px;">最优路径算法</a> <a href="/tags/机器学习/" style="font-size: 10px;">机器学习</a> <a href="/tags/源码/" style="font-size: 11.82px;">源码</a> <a href="/tags/算法/" style="font-size: 19.09px;">算法</a> <a href="/tags/线程安全/" style="font-size: 10.91px;">线程安全</a> <a href="/tags/编程珠玑/" style="font-size: 11.82px;">编程珠玑</a> <a href="/tags/计算机基础/" style="font-size: 10px;">计算机基础</a> <a href="/tags/设计模式/" style="font-size: 12.73px;">设计模式</a> <a href="/tags/贪心算法/" style="font-size: 11.82px;">贪心算法</a> <a href="/tags/跳表/" style="font-size: 10px;">跳表</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            <!-- 
            <a href="/VIM-Command/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="VIM 命令">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-12-10T02:31:22.000Z">2018-12-10</time></div>
                    <a href="/VIM-Command/" class="has-link-black-ter is-size-6">VIM 命令</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/Lock-Control/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="锁粒度的控制">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-04T04:37:22.000Z">2018-11-04</time></div>
                    <a href="/Lock-Control/" class="has-link-black-ter is-size-6">锁粒度的控制</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/Temporary-Menory-Table/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="临时表和内存表">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-04T04:37:22.000Z">2018-11-04</time></div>
                    <a href="/Temporary-Menory-Table/" class="has-link-black-ter is-size-6">临时表和内存表</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/MySQL/">MySQL</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/Python2ToPython3/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Python2切换Python3">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T04:37:22.000Z">2018-11-03</time></div>
                    <a href="/Python2ToPython3/" class="has-link-black-ter is-size-6">Python2切换Python3</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/MySQL-Command/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="MySQL基本命令">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T04:37:22.000Z">2018-11-03</time></div>
                    <a href="/MySQL-Command/" class="has-link-black-ter is-size-6">MySQL基本命令</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/MySQL/">MySQL</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">十月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">九月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">八月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">七月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">六月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">五月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/04/">
                <span class="level-start">
                    <span class="level-item">四月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/03/">
                <span class="level-start">
                    <span class="level-item">三月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/02/">
                <span class="level-start">
                    <span class="level-item">二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/10/">
                <span class="level-start">
                    <span class="level-item">十月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">13</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/09/">
                <span class="level-start">
                    <span class="level-item">九月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/08/">
                <span class="level-start">
                    <span class="level-item">八月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/07/">
                <span class="level-start">
                    <span class="level-item">七月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/06/">
                <span class="level-start">
                    <span class="level-item">六月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/05/">
                <span class="level-start">
                    <span class="level-item">五月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/04/">
                <span class="level-start">
                    <span class="level-item">四月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/03/">
                <span class="level-start">
                    <span class="level-item">三月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/02/">
                <span class="level-start">
                    <span class="level-item">二月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/01/">
                <span class="level-start">
                    <span class="level-item">一月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/09/">
                <span class="level-start">
                    <span class="level-item">九月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/03/">
                <span class="level-start">
                    <span class="level-item">三月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/10/">
                <span class="level-start">
                    <span class="level-item">十月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/08/">
                <span class="level-start">
                    <span class="level-item">八月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/07/">
                <span class="level-start">
                    <span class="level-item">七月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/06/">
                <span class="level-start">
                    <span class="level-item">六月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/04/">
                <span class="level-start">
                    <span class="level-item">四月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/03/">
                <span class="level-start">
                    <span class="level-item">三月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/02/">
                <span class="level-start">
                    <span class="level-item">二月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/01/">
                <span class="level-start">
                    <span class="level-item">一月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android/">
                        <span class="tag">Android</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Centos/">
                        <span class="tag">Centos</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Effect-Java/">
                        <span class="tag">Effect Java</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JDK6-源码/">
                        <span class="tag">JDK6 源码</span>
                        <span class="tag is-grey">18</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JDK7-源码/">
                        <span class="tag">JDK7 源码</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JDK8-源码/">
                        <span class="tag">JDK8 源码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JMM/">
                        <span class="tag">JMM</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JVM/">
                        <span class="tag">JVM</span>
                        <span class="tag is-grey">10</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">40</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Linux/">
                        <span class="tag">Linux</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MongoDB/">
                        <span class="tag">MongoDB</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Mongodb/">
                        <span class="tag">Mongodb</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MyBatis/">
                        <span class="tag">MyBatis</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MySQL/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Redis/">
                        <span class="tag">Redis</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Spring/">
                        <span class="tag">Spring</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Think-In-Java/">
                        <span class="tag">Think In Java</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Tomcat/">
                        <span class="tag">Tomcat</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Ubuntu/">
                        <span class="tag">Ubuntu</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/一致性哈希算法/">
                        <span class="tag">一致性哈希算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/书/">
                        <span class="tag">书</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/倒排索引/">
                        <span class="tag">倒排索引</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/内存泄漏/">
                        <span class="tag">内存泄漏</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分支限界算法/">
                        <span class="tag">分支限界算法</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分治法/">
                        <span class="tag">分治法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分治算法/">
                        <span class="tag">分治算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分词算法/">
                        <span class="tag">分词算法</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态规划/">
                        <span class="tag">动态规划</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态规划算法/">
                        <span class="tag">动态规划算法</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/华为/">
                        <span class="tag">华为</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/回溯算法/">
                        <span class="tag">回溯算法</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/多线程/">
                        <span class="tag">多线程</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/工具/">
                        <span class="tag">工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/并发/">
                        <span class="tag">并发</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源项目/">
                        <span class="tag">开源项目</span>
                        <span class="tag is-grey">17</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/手机游戏/">
                        <span class="tag">手机游戏</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/排序算法/">
                        <span class="tag">排序算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/推荐/">
                        <span class="tag">推荐</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/散列表/">
                        <span class="tag">散列表</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数学/">
                        <span class="tag">数学</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据库/">
                        <span class="tag">数据库</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据结构/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/日语/">
                        <span class="tag">日语</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/最优路径算法/">
                        <span class="tag">最优路径算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/机器学习/">
                        <span class="tag">机器学习</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/源码/">
                        <span class="tag">源码</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/算法/">
                        <span class="tag">算法</span>
                        <span class="tag is-grey">26</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/线程安全/">
                        <span class="tag">线程安全</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/编程珠玑/">
                        <span class="tag">编程珠玑</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/计算机基础/">
                        <span class="tag">计算机基础</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/设计模式/">
                        <span class="tag">设计模式</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/贪心算法/">
                        <span class="tag">贪心算法</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/跳表/">
                        <span class="tag">跳表</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/面试/">
                        <span class="tag">面试</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            <!-- 
            <a href="/VIM-Command/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="VIM 命令">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-12-10T02:31:22.000Z">2018-12-10</time></div>
                    <a href="/VIM-Command/" class="has-link-black-ter is-size-6">VIM 命令</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/Lock-Control/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="锁粒度的控制">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-04T04:37:22.000Z">2018-11-04</time></div>
                    <a href="/Lock-Control/" class="has-link-black-ter is-size-6">锁粒度的控制</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/Temporary-Menory-Table/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="临时表和内存表">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-04T04:37:22.000Z">2018-11-04</time></div>
                    <a href="/Temporary-Menory-Table/" class="has-link-black-ter is-size-6">临时表和内存表</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/MySQL/">MySQL</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/Python2ToPython3/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Python2切换Python3">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T04:37:22.000Z">2018-11-03</time></div>
                    <a href="/Python2ToPython3/" class="has-link-black-ter is-size-6">Python2切换Python3</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/MySQL-Command/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="MySQL基本命令">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T04:37:22.000Z">2018-11-03</time></div>
                    <a href="/MySQL-Command/" class="has-link-black-ter is-size-6">MySQL基本命令</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/MySQL/">MySQL</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">十月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">九月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">八月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">七月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">六月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">五月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/04/">
                <span class="level-start">
                    <span class="level-item">四月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/03/">
                <span class="level-start">
                    <span class="level-item">三月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/02/">
                <span class="level-start">
                    <span class="level-item">二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/10/">
                <span class="level-start">
                    <span class="level-item">十月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">13</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/09/">
                <span class="level-start">
                    <span class="level-item">九月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/08/">
                <span class="level-start">
                    <span class="level-item">八月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/07/">
                <span class="level-start">
                    <span class="level-item">七月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/06/">
                <span class="level-start">
                    <span class="level-item">六月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/05/">
                <span class="level-start">
                    <span class="level-item">五月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/04/">
                <span class="level-start">
                    <span class="level-item">四月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/03/">
                <span class="level-start">
                    <span class="level-item">三月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/02/">
                <span class="level-start">
                    <span class="level-item">二月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/01/">
                <span class="level-start">
                    <span class="level-item">一月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/09/">
                <span class="level-start">
                    <span class="level-item">九月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/03/">
                <span class="level-start">
                    <span class="level-item">三月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/10/">
                <span class="level-start">
                    <span class="level-item">十月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/08/">
                <span class="level-start">
                    <span class="level-item">八月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/07/">
                <span class="level-start">
                    <span class="level-item">七月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/06/">
                <span class="level-start">
                    <span class="level-item">六月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/04/">
                <span class="level-start">
                    <span class="level-item">四月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/03/">
                <span class="level-start">
                    <span class="level-item">三月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/02/">
                <span class="level-start">
                    <span class="level-item">二月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/01/">
                <span class="level-start">
                    <span class="level-item">一月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android/">
                        <span class="tag">Android</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Centos/">
                        <span class="tag">Centos</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Effect-Java/">
                        <span class="tag">Effect Java</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JDK6-源码/">
                        <span class="tag">JDK6 源码</span>
                        <span class="tag is-grey">18</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JDK7-源码/">
                        <span class="tag">JDK7 源码</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JDK8-源码/">
                        <span class="tag">JDK8 源码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JMM/">
                        <span class="tag">JMM</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JVM/">
                        <span class="tag">JVM</span>
                        <span class="tag is-grey">10</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">40</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Linux/">
                        <span class="tag">Linux</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MongoDB/">
                        <span class="tag">MongoDB</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Mongodb/">
                        <span class="tag">Mongodb</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MyBatis/">
                        <span class="tag">MyBatis</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MySQL/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Redis/">
                        <span class="tag">Redis</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Spring/">
                        <span class="tag">Spring</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Think-In-Java/">
                        <span class="tag">Think In Java</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Tomcat/">
                        <span class="tag">Tomcat</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Ubuntu/">
                        <span class="tag">Ubuntu</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/一致性哈希算法/">
                        <span class="tag">一致性哈希算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/书/">
                        <span class="tag">书</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/倒排索引/">
                        <span class="tag">倒排索引</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/内存泄漏/">
                        <span class="tag">内存泄漏</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分支限界算法/">
                        <span class="tag">分支限界算法</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分治法/">
                        <span class="tag">分治法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分治算法/">
                        <span class="tag">分治算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分词算法/">
                        <span class="tag">分词算法</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态规划/">
                        <span class="tag">动态规划</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态规划算法/">
                        <span class="tag">动态规划算法</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/华为/">
                        <span class="tag">华为</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/回溯算法/">
                        <span class="tag">回溯算法</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/多线程/">
                        <span class="tag">多线程</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/工具/">
                        <span class="tag">工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/并发/">
                        <span class="tag">并发</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源项目/">
                        <span class="tag">开源项目</span>
                        <span class="tag is-grey">17</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/手机游戏/">
                        <span class="tag">手机游戏</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/排序算法/">
                        <span class="tag">排序算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/推荐/">
                        <span class="tag">推荐</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/散列表/">
                        <span class="tag">散列表</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数学/">
                        <span class="tag">数学</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据库/">
                        <span class="tag">数据库</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据结构/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/日语/">
                        <span class="tag">日语</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/最优路径算法/">
                        <span class="tag">最优路径算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/机器学习/">
                        <span class="tag">机器学习</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/源码/">
                        <span class="tag">源码</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/算法/">
                        <span class="tag">算法</span>
                        <span class="tag is-grey">26</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/线程安全/">
                        <span class="tag">线程安全</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/编程珠玑/">
                        <span class="tag">编程珠玑</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/计算机基础/">
                        <span class="tag">计算机基础</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/设计模式/">
                        <span class="tag">设计模式</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/贪心算法/">
                        <span class="tag">贪心算法</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/跳表/">
                        <span class="tag">跳表</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/面试/">
                        <span class="tag">面试</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    Joe|博客
                
                </a>
                <p class="is-size-7">
                &copy; 2019 Joe&nbsp;
                <!-- Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a> -->
                
                </p>
            </div>
            <div class="level-end">
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>