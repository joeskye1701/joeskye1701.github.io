<!DOCTYPE html>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>Java软引用、弱引用和虚引用 - Joe|博客</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="1 介绍 1.1 强引用（StrongReference） 1.2 软引用（SoftReference） 1.3 弱引用（WeakReference） 1.4 虚引用（PhantomReference） 1.5 垃圾回收 1.5.1 例子1 1.5.2 例子2 1.5.3 综合例子1和例子2   1.6 对象再生和引用队列问题   2 示例 2.1 示例 2.2 2.3 2.4 2.5 2.2">
<meta name="keywords" content="Java">
<meta property="og:type" content="article">
<meta property="og:title" content="Java软引用、弱引用和虚引用">
<meta property="og:url" content="https://joeskye1701.github.io/Java-Soft-Reference/index.html">
<meta property="og:site_name" content="Joe|博客">
<meta property="og:description" content="1 介绍 1.1 强引用（StrongReference） 1.2 软引用（SoftReference） 1.3 弱引用（WeakReference） 1.4 虚引用（PhantomReference） 1.5 垃圾回收 1.5.1 例子1 1.5.2 例子2 1.5.3 综合例子1和例子2   1.6 对象再生和引用队列问题   2 示例 2.1 示例 2.2 2.3 2.4 2.5 2.2">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://joeskye1701.github.io/Java-Soft-Reference/reference-1.jpg">
<meta property="og:image" content="https://joeskye1701.github.io/Java-Soft-Reference/reference-2.jpg">
<meta property="og:image" content="https://joeskye1701.github.io/Java-Soft-Reference/reference-3.jpg">
<meta property="og:image" content="https://joeskye1701.github.io/Java-Soft-Reference/reference-4.jpg">
<meta property="og:image" content="https://joeskye1701.github.io/Java-Soft-Reference/reference-5.jpg">
<meta property="og:image" content="https://joeskye1701.github.io/Java-Soft-Reference/reference-6.jpg">
<meta property="og:image" content="https://joeskye1701.github.io/Java-Soft-Reference/reference-7.jpg">
<meta property="og:updated_time" content="2018-10-23T00:40:40.154Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java软引用、弱引用和虚引用">
<meta name="twitter:description" content="1 介绍 1.1 强引用（StrongReference） 1.2 软引用（SoftReference） 1.3 弱引用（WeakReference） 1.4 虚引用（PhantomReference） 1.5 垃圾回收 1.5.1 例子1 1.5.2 例子2 1.5.3 综合例子1和例子2   1.6 对象再生和引用队列问题   2 示例 2.1 示例 2.2 2.3 2.4 2.5 2.2">
<meta name="twitter:image" content="https://joeskye1701.github.io/Java-Soft-Reference/reference-1.jpg">





<link rel="icon" href="/images/thank-you-kobe.jpg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/xcode.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
<script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?c422b171d3bdb7dbfae47ff3f70f9d30";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>

    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                Joe|博客
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">主页</a>
                
                <a class="navbar-item" href="/archives">归档</a>
                
                <a class="navbar-item" href="/categories">分类</a>
                
                <a class="navbar-item" href="/tags">标签</a>
                
                <a class="navbar-item" href="/about">关于</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2013-04-02T04:37:22.000Z">2013-04-02</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Java/">Java</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    41 分钟 读完 (大约 6122 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                Java软引用、弱引用和虚引用
            
        </h1>
        <div class="content">
            <!-- TOC -->
<ul>
<li><a href="#1-介绍">1 介绍</a><ul>
<li><a href="#11-强引用strongreference">1.1 强引用（StrongReference）</a></li>
<li><a href="#12-软引用softreference">1.2 软引用（SoftReference）</a></li>
<li><a href="#13-弱引用weakreference">1.3 弱引用（WeakReference）</a></li>
<li><a href="#14-虚引用phantomreference">1.4 虚引用（PhantomReference）</a></li>
<li><a href="#15-垃圾回收">1.5 垃圾回收</a><ul>
<li><a href="#151-例子1">1.5.1 例子1</a></li>
<li><a href="#152-例子2">1.5.2 例子2</a></li>
<li><a href="#153-综合例子1和例子2">1.5.3 综合例子1和例子2</a></li>
</ul>
</li>
<li><a href="#16-对象再生和引用队列问题">1.6 对象再生和引用队列问题</a></li>
</ul>
</li>
<li><a href="#2-示例">2 示例</a><ul>
<li><a href="#21-示例">2.1 示例</a></li>
<li><a href="#22">2.2</a></li>
<li><a href="#23">2.3</a></li>
<li><a href="#24">2.4</a></li>
<li><a href="#25">2.5</a></li>
<li><a href="#22-软引用">2.2 软引用</a></li>
<li><a href="#23-软引用实现缓存">2.3 软引用实现缓存</a></li>
<li><a href="#24-弱引用">2.4 弱引用</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h1 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1 介绍"></a>1 介绍</h1><p>在JDK 1.2以前的版本中，若一个对象不被任何变量引用，那么程序就无法再使用这个对象。也就是说，只有对象处于可触及（<code>reachable</code>）状态，程序才能使用它。<br>从JDK 1.2版本开始，把对象的引用分为4种级别，从而使程序能更加灵活地控制对象的生命周期。<br>这4种级别由高到低依次为：强引用、软引用、弱引用和虚引用。<br><img src="./reference-1.jpg" alt><br><img src="./reference-2.jpg" alt><br><img src="./reference-3.jpg" alt>  </p>
<h2 id="1-1-强引用（StrongReference）"><a href="#1-1-强引用（StrongReference）" class="headerlink" title="1.1 强引用（StrongReference）"></a>1.1 强引用（StrongReference）</h2><p>强引用是使用最普遍的引用。如果一个对象具有强引用，那垃圾回收器绝不会回收它。当内存空间不足，Java虚拟机宁愿抛出<code>OutOfMemoryError</code>错误，使程序异常终止，也不会靠随意回收具有强引用的对象来解决内存不足的问题。</p>
<h2 id="1-2-软引用（SoftReference）"><a href="#1-2-软引用（SoftReference）" class="headerlink" title="1.2 软引用（SoftReference）"></a>1.2 软引用（SoftReference）</h2><p>如果一个对象只具有软引用，则内存空间足够，垃圾回收器就不会回收它；如果内存空间不足，就会回收这些对象的内存。只要垃圾回收器没有回收它，该对象就可以被程序使用。软引用可用来实现内存敏感的高速缓存。<br>软引用可以和一个引用队列（<code>ReferenceQueue</code>）联合使用，如果软引用所引用的对象被垃圾回收器回收，Java虚拟机就会把这个软引用加入到与之关联的引用队列（<code>ReferenceQueue</code>）中。软引用是在垃圾回收之后，才加入队列。<br><a id="more"></a></p>
<h2 id="1-3-弱引用（WeakReference）"><a href="#1-3-弱引用（WeakReference）" class="headerlink" title="1.3 弱引用（WeakReference）"></a>1.3 弱引用（WeakReference）</h2><p>弱引用与软引用的区别在于：只具有弱引用的对象拥有更短暂的生命周期。<br>在垃圾回收器线程扫描它所管辖的内存区域的过程中，一旦发现只具有弱引用的对象，不管当前内存空间足够与否都会回收它的内存。不过，由于垃圾回收器是一个优先级很低的线程，因此不一定会很快发现那些只具有弱引用的对象。<br>弱引用可以和一个引用队列（<code>ReferenceQueue</code>）联合使用，如果弱引用所引用的对象被垃圾回收，Java虚拟机就会把这个弱引用加入到与之关联的引用队列（<code>ReferenceQueue</code>）中。弱引用是在垃圾回收之后，才加入队列。 </p>
<h2 id="1-4-虚引用（PhantomReference）"><a href="#1-4-虚引用（PhantomReference）" class="headerlink" title="1.4 虚引用（PhantomReference）"></a>1.4 虚引用（PhantomReference）</h2><p>“虚引用”顾名思义，就是形同虚设，与其他几种引用都不同，虚引用并不会决定对象的生命周期。如果一个对象仅持有虚引用，那么它就和没有任何引用一样，在任何时候都可能被垃圾回收器回收。虚引用主要用来跟踪对象被垃圾回收器回收的活动。虚引用与软引用和弱引用的一个区别在于：虚引用必须和引用队列（<code>ReferenceQueue</code>）联合使用。<br>当垃圾回收器准备回收一个对象时，如果发现它还有虚引用，就会在回收对象的内存之前，把这个虚引用加入到与之关联的引用队列中。<br>程序可以通过判断引用队列中是否已经加入虚引用，来了解被引用的对象是否将要被垃圾回收。如果程序发现某个虚引用已经被加入到引用队列，那么就可以在所引用的对象的内存被回收之前采取必要的行动。<br>在任何时候，我们都可以调用<code>ReferenceQueue#poll()</code>来检查是否有它所关心的非强可及对象被回收。如果队列为空，将返回一个null，否则该方法返回队列中前面的一个<code>Reference</code>对象。利用这个方法，我们可以检查哪个<code>SoftReference</code>所软引用的对象已经被回收。  </p>
<h2 id="1-5-垃圾回收"><a href="#1-5-垃圾回收" class="headerlink" title="1.5 垃圾回收"></a>1.5 垃圾回收</h2><p>在垃圾回收时，软引用和弱引用差别不大，JVM都是先把<code>SoftReference</code>和<code>WeakReference#referent</code>字段值设置成null，<code>referent</code>可以认为对象销毁的标志，也就是<code>referent=null</code>时，之后加入到引用队列（我们可以认为JVM先回收堆对象占用的内存，然后才将软引用或弱引用加入到引用队列。这里回收是在对象不会再生的情况下，因为对象可能在<code>finalize()</code>中再生）；而虚引用则不同，如果某个堆中的对象，只有虚引用，那么JVM会将<code>PhantomReference</code>加入到引用队列中，JVM不会自动将<code>referent</code>字段值设置成null（先保留堆对象的内存空间）。<br><code>referent</code>是<code>java.lang.ref.Reference</code>类的私有字段，虽然没有暴露出共有API来访问这个字段，但是我们可以通过反射拿到这个字段的值，这样就能知道引用被加入到引用队列的时候，<code>referent</code>到底是不是null。<code>SoftReference</code>和<code>WeakReference</code>是一样的，这里我们以<code>WeakReference</code>为例。</p>
<h3 id="1-5-1-例子1"><a href="#1-5-1-例子1" class="headerlink" title="1.5.1 例子1"></a>1.5.1 例子1</h3><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.Reference;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.ReferenceQueue;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.WeakReference;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// 会报空指针:WeakReference中的referent被设置成null,之后加入到ReferenceQueue</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestWeakReference</span> </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">boolean</span> isRun = <span class="hljs-keyword">true</span>;</span><br><span class="line">	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> ReferenceQueue&lt;String&gt; referenceQueue = <span class="hljs-keyword">new</span> ReferenceQueue&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		String abc = <span class="hljs-keyword">new</span> String(<span class="hljs-string">"abc"</span>);</span><br><span class="line">		System.out.println(abc.getClass() + <span class="hljs-string">"@"</span> + abc.hashCode());</span><br><span class="line"></span><br><span class="line">		<span class="hljs-keyword">new</span> Thread() &#123;</span><br><span class="line">			<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">				<span class="hljs-keyword">while</span> (isRun) &#123;</span><br><span class="line">					Object o = referenceQueue.poll();</span><br><span class="line">					<span class="hljs-keyword">if</span> (o != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">						<span class="hljs-keyword">try</span> &#123;</span><br><span class="line">							Field rereferent = Reference.class.getDeclaredField(<span class="hljs-string">"referent"</span>);</span><br><span class="line">							rereferent.setAccessible(<span class="hljs-keyword">true</span>);</span><br><span class="line">							Object result = rereferent.get(o);</span><br><span class="line">							<span class="hljs-comment">//说明result是null</span></span><br><span class="line">							System.out.println(<span class="hljs-string">"gc will collect:"</span> + result.getClass() + <span class="hljs-string">"@"</span> + result.hashCode());</span><br><span class="line">						&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;</span><br><span class="line">							e.printStackTrace();</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;.start();</span><br><span class="line"></span><br><span class="line">		<span class="hljs-comment">// 对象是弱可达的</span></span><br><span class="line">		WeakReference&lt;String&gt; weak = <span class="hljs-keyword">new</span> WeakReference&lt;String&gt;(abc, referenceQueue);</span><br><span class="line">		System.out.println(<span class="hljs-string">"weak="</span> + weak);</span><br><span class="line"></span><br><span class="line">		<span class="hljs-comment">// 清除强引用,触发GC</span></span><br><span class="line">		abc = <span class="hljs-keyword">null</span>;</span><br><span class="line">		System.gc();</span><br><span class="line">		<span class="hljs-comment">//等待GC被回收</span></span><br><span class="line">		Thread.sleep(<span class="hljs-number">3000</span>);</span><br><span class="line">		isRun = <span class="hljs-keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>控制台<br><figure class="highlight prolog hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class java.lang.<span class="hljs-symbol">String</span>@<span class="hljs-number">96354</span></span><br><span class="line">weak=java.lang.ref.<span class="hljs-symbol">WeakReference</span>@<span class="hljs-number">54624</span>a40</span><br><span class="line">java.lang.<span class="hljs-symbol">NullPointerException</span></span><br><span class="line">	at <span class="hljs-symbol">TestWeakReference</span>$<span class="hljs-number">1.</span>run(<span class="hljs-symbol">TestWeakReference</span>.java:<span class="hljs-number">25</span>)</span><br></pre></td></tr></table></figure></p>
<p>结论：当我们清除强引用，触发GC的时候，JVM检测到<code>new String(&quot;abc&quot;)</code>这个堆中的对象只有<code>WeakReference</code>，那么JVM会释放堆对象的内存，并自动将<code>WeakReference#referent</code>字段设置成null，所以<code>result.getClass()</code>会报空指针异常。<br>换成<code>PhantomReference</code>控制台打印<br><figure class="highlight prolog hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class java.lang.<span class="hljs-symbol">String</span>@<span class="hljs-number">96354</span></span><br><span class="line">weak=java.lang.ref.<span class="hljs-symbol">PhantomReference</span>@<span class="hljs-number">54624</span>a40</span><br><span class="line">gc will collect:class java.lang.<span class="hljs-symbol">String</span>@<span class="hljs-number">96354</span></span><br></pre></td></tr></table></figure></p>
<p>结论：当<code>PhantomReference</code>加入到引用队列的时候，<code>referent</code>字段的值并不是null，而且堆对象占用的内存空间仍然存在。也就是说对于虚引用，JVM是先将其加入引用队列（然后才删除对象），当我们从引用队列删除<code>PhantomReference</code>对象之后(此时堆中的对象是<code>unreachable</code>的)，那么JVM才会释放堆对象占用的内存空间。由此可见，使用虚引用有潜在的内存泄露风险，因为JVM不会自动帮助我们释放，我们必须要保证它指向的堆对象是不可达的。（这里有个问题，如果<code>sleep(3000)</code>，GC并没有回收它，因为是回收之前加入队列，如果没有回收它，自然会存在对象）所有的 <code>PhantomReference</code>对象都必须用经过关联的<code>ReferenceQueue</code>来创建。</p>
<h3 id="1-5-2-例子2"><a href="#1-5-2-例子2" class="headerlink" title="1.5.2 例子2"></a>1.5.2 例子2</h3><p>验证软引用，弱引用，虚引用进入队列是不是需要执行<code>finalize()</code><br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> demo6;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> </span>&#123;  </span><br><span class="line">	  </span><br><span class="line">    <span class="hljs-meta">@Override</span>  </span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">finalize</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;  </span><br><span class="line">        System.out.println(<span class="hljs-string">"finalize at "</span> + <span class="hljs-keyword">new</span> Date());  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> demo6;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.PhantomReference;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.ReferenceQueue;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Tem</span> </span>&#123;  </span><br><span class="line">	  </span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;  </span><br><span class="line">  </span><br><span class="line">        ReferenceQueue queue = <span class="hljs-keyword">new</span> ReferenceQueue();  </span><br><span class="line">        <span class="hljs-comment">//SoftReference ref = new SoftReference(new B(), queue);  </span></span><br><span class="line">        <span class="hljs-comment">//WeakReference ref = new WeakReference(new B(), queue);  </span></span><br><span class="line">        PhantomReference ref = <span class="hljs-keyword">new</span> PhantomReference(<span class="hljs-keyword">new</span> B(), queue);  </span><br><span class="line">        </span><br><span class="line">        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) &#123;  </span><br><span class="line">            Object obj = queue.poll();  </span><br><span class="line">            <span class="hljs-keyword">if</span> (obj != <span class="hljs-keyword">null</span>) &#123;  </span><br><span class="line">                System.out.println(<span class="hljs-string">"queue.poll at "</span> + <span class="hljs-keyword">new</span> Date() + <span class="hljs-string">" "</span> + obj);  </span><br><span class="line">                <span class="hljs-keyword">break</span>;  </span><br><span class="line">            &#125;  </span><br><span class="line">            System.gc();  </span><br><span class="line">            System.out.println(<span class="hljs-string">"run once."</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">        Thread.sleep(<span class="hljs-number">100000</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：<code>WeakReference</code>不是必须进入<code>finalize()</code>才能进入队列。<code>PhantomReference</code>则必须进入<code>finalize()</code>才能进入队列。但这并不能说明对象销毁和队列的顺序。</p>
<h3 id="1-5-3-综合例子1和例子2"><a href="#1-5-3-综合例子1和例子2" class="headerlink" title="1.5.3 综合例子1和例子2"></a>1.5.3 综合例子1和例子2</h3><p><strong>WeakReference</strong><br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> demo1;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.PhantomReference;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.Reference;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.ReferenceQueue;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.WeakReference;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Tem</span> </span>&#123;  </span><br><span class="line">	  </span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;  </span><br><span class="line">    	B b=<span class="hljs-keyword">new</span> B();</span><br><span class="line">        ReferenceQueue queue = <span class="hljs-keyword">new</span> ReferenceQueue();  </span><br><span class="line">        <span class="hljs-comment">//SoftReference ref1 = new SoftReference(new B(), queue);  </span></span><br><span class="line">        WeakReference ref2 = <span class="hljs-keyword">new</span> WeakReference(b, queue);  </span><br><span class="line">        <span class="hljs-comment">//PhantomReference ref3 = new PhantomReference(b, queue);  </span></span><br><span class="line">        </span><br><span class="line">        b=<span class="hljs-keyword">null</span>;</span><br><span class="line">        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) &#123;  </span><br><span class="line">            Object obj = queue.poll();  </span><br><span class="line">            <span class="hljs-keyword">if</span> (obj != <span class="hljs-keyword">null</span>) &#123;  </span><br><span class="line">                System.out.println(<span class="hljs-string">"queue.poll at "</span> + <span class="hljs-keyword">new</span> Date() + <span class="hljs-string">" "</span> + obj);  </span><br><span class="line">                </span><br><span class="line">                <span class="hljs-keyword">try</span> &#123;</span><br><span class="line">                	Field rereferent = Reference.class.getDeclaredField(<span class="hljs-string">"referent"</span>);</span><br><span class="line">                	rereferent.setAccessible(<span class="hljs-keyword">true</span>);</span><br><span class="line">                	Object result = rereferent.get(obj);</span><br><span class="line">                	<span class="hljs-comment">//说明result是null</span></span><br><span class="line">                	System.out.println(<span class="hljs-string">"gc will collect："</span> + result.getClass() + <span class="hljs-string">"@"</span> + result.hashCode());</span><br><span class="line">                &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                	e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="hljs-keyword">break</span>;  </span><br><span class="line">            &#125;  </span><br><span class="line">            </span><br><span class="line">            System.gc();  </span><br><span class="line">            System.out.println(<span class="hljs-string">"run once."</span>);  </span><br><span class="line">        &#125;</span><br><span class="line">        Thread.sleep(<span class="hljs-number">100000</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>弱引用，<code>finalize()</code>和引用队列不是一个线程，没有必须进入<code>finalize()</code>，才进入引用队列的条件。进入引用队列前，<code>referent</code>已经是null。<br><figure class="highlight prolog hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">run once.</span><br><span class="line">finalize at <span class="hljs-symbol">Mon</span> <span class="hljs-symbol">Sep</span> <span class="hljs-number">26</span> <span class="hljs-number">17</span>:<span class="hljs-number">10</span>:<span class="hljs-number">13</span> <span class="hljs-symbol">CST</span> <span class="hljs-number">2016</span></span><br><span class="line">queue.poll at <span class="hljs-symbol">Mon</span> <span class="hljs-symbol">Sep</span> <span class="hljs-number">26</span> <span class="hljs-number">17</span>:<span class="hljs-number">10</span>:<span class="hljs-number">13</span> <span class="hljs-symbol">CST</span> <span class="hljs-number">2016</span> java.lang.ref.<span class="hljs-symbol">WeakReference</span>@<span class="hljs-number">8</span>c9dee3</span><br><span class="line">java.lang.<span class="hljs-symbol">NullPointerException</span></span><br><span class="line">	at demo1.<span class="hljs-symbol">Tem</span>.main(<span class="hljs-symbol">Tem</span>.java:<span class="hljs-number">33</span>)</span><br></pre></td></tr></table></figure></p>
<p><strong>PhantomReference</strong><br>虚引用，必须进入<code>finalize()</code>才能进入队列，进入队列<code>referent</code>还是有值存在。（回收对象之前，加入队列）<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">run once.</span><br><span class="line">run once.</span><br><span class="line">run once.</span><br><span class="line">finalize at Mon Sep 26 17:33:09 CST 2016</span><br><span class="line">run once.</span><br><span class="line">queue.poll at Mon Sep 26 17:33:11 CST 2016 java.lang.ref.PhantomReference@4ec8c719</span><br><span class="line">gc will collect：class demo1.B@1591599764</span><br></pre></td></tr></table></figure></p>
<h2 id="1-6-对象再生和引用队列问题"><a href="#1-6-对象再生和引用队列问题" class="headerlink" title="1.6 对象再生和引用队列问题"></a>1.6 对象再生和引用队列问题</h2><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> demo2;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;    </span><br><span class="line">    <span class="hljs-keyword">static</span> A a;    </span><br><span class="line">    </span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">A</span><span class="hljs-params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="hljs-meta">@Override</span></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">finalize</span><span class="hljs-params">()</span> </span>&#123;    </span><br><span class="line">        a = <span class="hljs-keyword">this</span>;    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>WeakReference</strong><br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> demo2;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.ReferenceQueue;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.WeakReference;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * </span></span><br><span class="line"><span class="hljs-comment"> * 弱引用对象再生，依然进入引用队列</span></span><br><span class="line"><span class="hljs-comment"> *</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">M</span> </span>&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		 	A a=<span class="hljs-keyword">new</span> A();  </span><br><span class="line">		 	System.out.println(a.hashCode());</span><br><span class="line">		    ReferenceQueue queue = <span class="hljs-keyword">new</span> ReferenceQueue();    </span><br><span class="line">		    WeakReference ref = <span class="hljs-keyword">new</span> WeakReference(a, queue);    </span><br><span class="line">		    System.out.println(ref.get());    </span><br><span class="line">		    </span><br><span class="line">		    a=<span class="hljs-keyword">null</span>;</span><br><span class="line">		    </span><br><span class="line">		    Object obj = <span class="hljs-keyword">null</span>;    </span><br><span class="line">		    obj = queue.poll();    </span><br><span class="line">		    System.out.println(<span class="hljs-string">"1="</span>+obj);    </span><br><span class="line">		    </span><br><span class="line">		    System.gc();    </span><br><span class="line">		    Thread.sleep(<span class="hljs-number">10000</span>);    </span><br><span class="line">		    System.gc();    </span><br><span class="line">		    </span><br><span class="line">		    System.out.println(<span class="hljs-string">"2="</span>+ref.get());    </span><br><span class="line">		    obj = queue.poll();    </span><br><span class="line">		    </span><br><span class="line">		    <span class="hljs-comment">//弱引用队列有值，说明对象已经被销毁</span></span><br><span class="line">		    <span class="hljs-comment">//但是A对象又在finalize里再生</span></span><br><span class="line">		    <span class="hljs-comment">//所以不能用队列来控制软引用，弱引用对象的生命周期</span></span><br><span class="line">		    <span class="hljs-comment">//执行GC的时候，A对象状态变成finalized，进入队列，至于对象再生，则状态不能再改变</span></span><br><span class="line">		    <span class="hljs-comment">//因为,进入队列和finalize()是2个不同的线程。可能先进入队列之后，才进入finalize()</span></span><br><span class="line">		    System.out.println(<span class="hljs-string">"3="</span>+obj);</span><br><span class="line">		    System.out.println(A.a.hashCode());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight prolog hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-number">366712642</span></span><br><span class="line">test.<span class="hljs-symbol">A</span>@<span class="hljs-number">15</span>db9742</span><br><span class="line"><span class="hljs-number">1</span>=null</span><br><span class="line"><span class="hljs-number">2</span>=null</span><br><span class="line"><span class="hljs-number">3</span>=java.lang.ref.<span class="hljs-symbol">WeakReference</span>@<span class="hljs-number">6</span>d06d69c</span><br><span class="line"><span class="hljs-number">366712642</span></span><br></pre></td></tr></table></figure>
<p>弱引用队列有值，说明对象已经被销毁，但是A对象又在<code>finalize</code>里再生，所以不能用队列来控制软引用，弱引用对象的生命周期，执行GC的时候，A对象状态变成<code>finalized</code>，进入队列，至于对象再生，则状态不能再改变。因为进入队列和<code>finalize()</code>是2个不同的线程。可能先进入队列之后，才进入<code>finalize()</code>，对象的状态来不及改变。<br><figure class="highlight prolog hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-number">1022736404</span></span><br><span class="line">demo2.<span class="hljs-symbol">A</span>@<span class="hljs-number">3</span>cf5b814</span><br><span class="line"><span class="hljs-number">1</span>=null</span><br><span class="line"><span class="hljs-number">2</span>=null</span><br><span class="line"><span class="hljs-number">3</span>=java.lang.ref.<span class="hljs-symbol">WeakReference</span>@<span class="hljs-number">773</span>de2bd</span><br><span class="line"><span class="hljs-number">1022736404</span></span><br></pre></td></tr></table></figure></p>
<p><strong>PhantomReference</strong><br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> demo2;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.PhantomReference;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.ReferenceQueue;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment"> * </span></span><br><span class="line"><span class="hljs-comment"> * 虚引用再生问题，finalize和进入队列顺序问题</span></span><br><span class="line"><span class="hljs-comment"> *</span></span><br><span class="line"><span class="hljs-comment"> */</span></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">W</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		ReferenceQueue queue = <span class="hljs-keyword">new</span> ReferenceQueue();</span><br><span class="line">		PhantomReference ref = <span class="hljs-keyword">new</span> PhantomReference(<span class="hljs-keyword">new</span> A(), queue);</span><br><span class="line"></span><br><span class="line">		System.out.println(ref.get());</span><br><span class="line">		Object obj = <span class="hljs-keyword">null</span>;</span><br><span class="line">		obj = queue.poll();</span><br><span class="line">		System.out.println(<span class="hljs-string">"1="</span> + obj);</span><br><span class="line"></span><br><span class="line">		<span class="hljs-comment">// 第一次gc</span></span><br><span class="line">		System.gc();</span><br><span class="line">		Thread.sleep(<span class="hljs-number">10000</span>);</span><br><span class="line">		System.gc();</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="hljs-string">"2="</span>+ref.get());</span><br><span class="line">		obj = queue.poll();</span><br><span class="line">		System.out.println(<span class="hljs-string">"3="</span>+obj);  <span class="hljs-comment">//第1次gc，对象再生，没有加入队列。</span></span><br><span class="line">									   <span class="hljs-comment">//虚引用是必须进入finalize方法才能进入队列，如果对象在此处再生，就不会进入队列。</span></span><br><span class="line"></span><br><span class="line">		A.a = <span class="hljs-keyword">null</span>;</span><br><span class="line"></span><br><span class="line">		<span class="hljs-comment">// 第二次gc</span></span><br><span class="line">		System.gc();</span><br><span class="line">		Thread.sleep(<span class="hljs-number">10000</span>);</span><br><span class="line">		obj = queue.poll();			   <span class="hljs-comment">//第2次gc，再生对象=null，加入队列。</span></span><br><span class="line">		System.out.println(obj);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">//虚引用更容易控制对象生命周期</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">/*null</span></span><br><span class="line"><span class="hljs-comment">1=null</span></span><br><span class="line"><span class="hljs-comment">2=null</span></span><br><span class="line"><span class="hljs-comment">3=null</span></span><br><span class="line"><span class="hljs-comment">java.lang.ref.PhantomReference@1e638ee4</span></span><br><span class="line"><span class="hljs-comment">*/</span></span><br></pre></td></tr></table></figure></p>
<p>虚引用是必须进入<code>finalize()</code>才能进入队列，如果对象在此处再生，就不会进入队列，所以队列里为null。<br><figure class="highlight prolog hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">null</span><br><span class="line"><span class="hljs-number">1</span>=null</span><br><span class="line"><span class="hljs-number">2</span>=null</span><br><span class="line"><span class="hljs-number">3</span>=null</span><br><span class="line">java.lang.ref.<span class="hljs-symbol">PhantomReference</span>@<span class="hljs-number">1e638</span>ee4</span><br></pre></td></tr></table></figure></p>
<h1 id="2-示例"><a href="#2-示例" class="headerlink" title="2 示例"></a>2 示例</h1><h2 id="2-1-示例"><a href="#2-1-示例" class="headerlink" title="2.1 示例"></a>2.1 示例</h2><p><img src="./reference-4.jpg" alt><br>图画的有点问题，<code>str1</code>是指向字符串，并不是指向<code>weak1</code>。<br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.ReferenceQueue;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.WeakReference;</span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReferenceDemo</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="hljs-comment">// 引用队列</span></span><br><span class="line">		ReferenceQueue&lt;String&gt; referenceQueue = <span class="hljs-keyword">new</span> ReferenceQueue&lt;String&gt;();</span><br><span class="line">		String str = <span class="hljs-keyword">new</span> String(<span class="hljs-string">"字符串"</span>);</span><br><span class="line">		<span class="hljs-comment">// 弱引用</span></span><br><span class="line">		WeakReference&lt;String&gt; weakReference1 = <span class="hljs-keyword">new</span> WeakReference&lt;String&gt;(str, referenceQueue);</span><br><span class="line">		WeakReference&lt;String&gt; weakReference2 = <span class="hljs-keyword">new</span> WeakReference&lt;String&gt;(str, referenceQueue);</span><br><span class="line">		<span class="hljs-comment">// 强引用str没有指向字符串</span></span><br><span class="line">		str = <span class="hljs-keyword">null</span>;</span><br><span class="line">		<span class="hljs-comment">// 弱引用指向的字符串，此时指向str1；str1是个强引用</span></span><br><span class="line">		<span class="hljs-comment">// 如果这里没有强引用，弱引用就会在Gc执行之后被消除</span></span><br><span class="line">		String str1 = weakReference1.get();</span><br><span class="line">		<span class="hljs-comment">// System.out.println("弱引用：" + str1);</span></span><br><span class="line">		System.out.println(<span class="hljs-string">"引用队列里的引用："</span> + referenceQueue.poll());</span><br><span class="line">		<span class="hljs-comment">// 执行GC回收</span></span><br><span class="line">		System.out.println(<span class="hljs-string">"------------------------------------GC回收----------------------------------------------"</span>);</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;</span><br><span class="line">			System.gc();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-comment">// 此时弱引用没有被消除，因为str1是强引用</span></span><br><span class="line">		str1 = weakReference1.get();</span><br><span class="line">		System.out.println(<span class="hljs-string">"弱引用1："</span> + weakReference1.get());</span><br><span class="line">		System.out.println(<span class="hljs-string">"弱引用2："</span> + weakReference2.get());</span><br><span class="line">		System.out.println(str1);</span><br><span class="line">		<span class="hljs-comment">// 引用队列添加被回收的对象</span></span><br><span class="line">		System.out.println(<span class="hljs-string">"引用队列："</span> + referenceQueue.poll());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight prolog hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">引用队列里的引用：null</span><br><span class="line">------------------------------------<span class="hljs-symbol">GC</span>回收----------------------------------------------</span><br><span class="line">弱引用<span class="hljs-number">1</span>：字符串</span><br><span class="line">弱引用<span class="hljs-number">2</span>：字符串</span><br><span class="line">字符串</span><br><span class="line">引用队列：null</span><br></pre></td></tr></table></figure>
<p>结论： 但是<code>str=null,str1=weakReference1.get()</code>；<code>str1</code>指向字符串，并且<code>weak1</code>和<code>weak2</code>同时有字符串的引用，“字符串”没有销毁，所以<code>weak1</code>，<code>weak2</code>都是强引用。</p>
<h2 id="2-2"><a href="#2-2" class="headerlink" title="2.2"></a>2.2</h2><p>创建一个<code>String</code>对象、<code>ReferenceQueue</code>对象和<code>WeakReference</code>对象。<br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// 创建一个强引用</span></span><br><span class="line">String str = <span class="hljs-keyword">new</span> String(<span class="hljs-string">"hello"</span>);</span><br><span class="line"><span class="hljs-comment">// 创建引用队列；表明队列中存放String对象的引用</span></span><br><span class="line">ReferenceQueue rq = <span class="hljs-keyword">new</span> ReferenceQueue();</span><br><span class="line"><span class="hljs-comment">// 创建一个弱引用，它引用"hello"对象，并且与rq引用队列关联</span></span><br><span class="line">WeakReference wf = <span class="hljs-keyword">new</span> WeakReference(str, rq);</span><br></pre></td></tr></table></figure></p>
<p><img src="./reference-5.jpg" alt><br>在图中，带实线的箭头表示强引用，带虚线的箭头表示弱引用。从图中可以看出，此时”hello”对象被<code>str</code>强引用，并且被一个<code>WeakReference</code>对象弱引用，因此”hello”对象不会被垃圾回收。</p>
<h2 id="2-3"><a href="#2-3" class="headerlink" title="2.3"></a>2.3</h2><p>把引用”hello”对象的<code>str</code>变量置为null，然后再通过<code>WeakReference</code>弱引用的<code>get()</code>获得”hello”对象的引用。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String str = new String(&quot;hello&quot;); //1  </span><br><span class="line">ReferenceQueue rq = new ReferenceQueue(); //2</span><br><span class="line">WeakReference wf = new WeakReference(str, rq); //3 </span><br><span class="line">str=null; //4 取消&quot;hello&quot;对象的强引用</span><br><span class="line">String str1=wf.get().toString(); //5 假如&quot;hello&quot;对象没有被回收，str1引用&quot;hello&quot;对象  </span><br><span class="line">//假如&quot;hello&quot;对象没有被回收，rq.poll()返回null  </span><br><span class="line">Reference ref=rq.poll(); //6</span><br></pre></td></tr></table></figure></p>
<p><img src="./reference-6.jpg" alt><br>“hello”对象只具有弱引用<br>执行完以上标记4后，内存中引用与对象的关系如图所示，此时”hello”对象仅仅具有弱引用，因此它有可能被垃圾回收。假如它还没有被垃圾回收，那么接下来在标记5执行<code>wf.get()</code>会返回”hello”对象的引用，并且使得这个对象被<code>str1</code>强引用。再接下来在标记6执行<code>rq.poll()</code>会返回null，因为此时引用队列中没有任何引用。<code>ReferenceQueue#poll()</code>用于返回队列中的引用，如果没有则返回null。</p>
<h2 id="2-4"><a href="#2-4" class="headerlink" title="2.4"></a>2.4</h2><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">String str = new String(&quot;hello&quot;); //1</span><br><span class="line">ReferenceQueue rq = new ReferenceQueue(); // 2</span><br><span class="line">WeakReference wf = new WeakReference(str, rq); // 3</span><br><span class="line">str = null; // 4</span><br><span class="line">// 两次催促垃圾回收器工作，提高&quot;hello&quot;对象被回收的可能性</span><br><span class="line">System.gc(); // 5</span><br><span class="line">System.gc(); // 6</span><br><span class="line">String str1 = wf.get().toString(); // 7 假如&quot;hello&quot;对象被回收，str1为null</span><br><span class="line">Reference ref = rq.poll(); // 8</span><br></pre></td></tr></table></figure>
<p><img src="./reference-7.jpg" alt><br>“hello”对象被垃圾回收，弱引用被加入到引用队列<br>在以下程序代码中，执行完标记4后，”hello”对象仅仅具有弱引用。接下来两次调用<code>System.gc()</code>，催促垃圾回收器工作，从而提高 “hello”对象被回收的可能性。假如”hello”对象被回收，那么<code>WeakReference</code>对象的引用被加入到<code>ReferenceQueue</code>中， 接下来<code>wf.get()</code>返回null，并且<code>rq.poll()</code>返回<code>WeakReference</code>对象的引用。图显示执行完标记8后内存中引用与对象的关系。</p>
<h2 id="2-5"><a href="#2-5" class="headerlink" title="2.5"></a>2.5</h2><p>依次创建10个软引用、10个弱引用和10个虚引用，它们各自引用一个Grocery对象。<br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> all;</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Grocery</span> </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> SIZE = <span class="hljs-number">10000</span>;</span><br><span class="line">	<span class="hljs-comment">// 属性d使得每个Grocery对象占用较多内存，有80K左右</span></span><br><span class="line">	<span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span>[] d = <span class="hljs-keyword">new</span> <span class="hljs-keyword">double</span>[SIZE];</span><br><span class="line">	<span class="hljs-keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Grocery</span><span class="hljs-params">(String id)</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">finalize</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="hljs-string">"Finalizing "</span> + id);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> all;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.PhantomReference;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.Reference;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.ReferenceQueue;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.SoftReference;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.WeakReference;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">All_10</span> </span>&#123;</span><br><span class="line">	<span class="hljs-meta">@SuppressWarnings</span>(<span class="hljs-string">"rawtypes"</span>)</span><br><span class="line">	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ReferenceQueue rq = <span class="hljs-keyword">new</span> ReferenceQueue();</span><br><span class="line"></span><br><span class="line">	<span class="hljs-meta">@SuppressWarnings</span>(<span class="hljs-string">"rawtypes"</span>)</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkQueue</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		Reference inq = rq.poll();</span><br><span class="line">		<span class="hljs-comment">// 从队列中取出一个引用</span></span><br><span class="line">		<span class="hljs-keyword">if</span> (inq != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">			System.out.println(<span class="hljs-string">"In queue: "</span> + inq + <span class="hljs-string">" : "</span> + inq.get());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-meta">@SuppressWarnings</span>(&#123; <span class="hljs-string">"rawtypes"</span>, <span class="hljs-string">"unchecked"</span> &#125;)</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> size = <span class="hljs-number">10</span>;</span><br><span class="line">		System.out.println(<span class="hljs-string">"--------------------创建10个Grocery对象以及10个软引用-------------------------------"</span>);</span><br><span class="line">		<span class="hljs-comment">// 创建10个Grocery对象以及10个软引用</span></span><br><span class="line">		Set sa = <span class="hljs-keyword">new</span> HashSet();</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">			SoftReference ref = <span class="hljs-keyword">new</span> SoftReference(<span class="hljs-keyword">new</span> Grocery(<span class="hljs-string">"soft-"</span> + i), rq);</span><br><span class="line">			System.out.println(<span class="hljs-string">"Just created soft: "</span> + ref.get());</span><br><span class="line">			sa.add(ref);</span><br><span class="line">		&#125;</span><br><span class="line">		System.gc();</span><br><span class="line">		checkQueue();</span><br><span class="line">		System.out.println(<span class="hljs-string">"--------------------创建10个Grocery对象以及10个弱引用-------------------------------"</span>);</span><br><span class="line">		<span class="hljs-comment">// 创建10个Grocery对象以及10个弱引用</span></span><br><span class="line">		Set wa = <span class="hljs-keyword">new</span> HashSet();</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">			WeakReference ref = <span class="hljs-keyword">new</span> WeakReference(<span class="hljs-keyword">new</span> Grocery(<span class="hljs-string">"weak-"</span> + i), rq);</span><br><span class="line">			System.out.println(<span class="hljs-string">"Just created weak: "</span> + ref.get());</span><br><span class="line">			wa.add(ref);</span><br><span class="line">		&#125;</span><br><span class="line">		System.gc();</span><br><span class="line">		checkQueue();</span><br><span class="line">		System.out.println(<span class="hljs-string">"--------------------创建10个Grocery对象以及10个虚引用-------------------------------"</span>);</span><br><span class="line">		<span class="hljs-comment">// 创建10个Grocery对象以及10个虚引用</span></span><br><span class="line">		Set pa = <span class="hljs-keyword">new</span> HashSet();</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">			PhantomReference ref = <span class="hljs-keyword">new</span> PhantomReference(<span class="hljs-keyword">new</span> Grocery(<span class="hljs-string">"Phantom-"</span> + i), rq);</span><br><span class="line">			System.out.println(<span class="hljs-string">"Just created Phantom: "</span> + ref.get());<span class="hljs-comment">//调用phanRef.get()不管在什么情况下会一直返回null，虚引用的特点</span></span><br><span class="line">			pa.add(ref);</span><br><span class="line">		&#125;</span><br><span class="line">		System.gc();</span><br><span class="line">		checkQueue();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>控制台打印<br><figure class="highlight prolog hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">--------------------创建<span class="hljs-number">10</span>个<span class="hljs-symbol">Grocery</span>对象以及<span class="hljs-number">10</span>个软引用-------------------------------</span><br><span class="line"><span class="hljs-symbol">Just</span> created soft: soft<span class="hljs-number">-0</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created soft: soft<span class="hljs-number">-1</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created soft: soft<span class="hljs-number">-2</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created soft: soft<span class="hljs-number">-3</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created soft: soft<span class="hljs-number">-4</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created soft: soft<span class="hljs-number">-5</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created soft: soft<span class="hljs-number">-6</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created soft: soft<span class="hljs-number">-7</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created soft: soft<span class="hljs-number">-8</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created soft: soft<span class="hljs-number">-9</span></span><br><span class="line">--------------------创建<span class="hljs-number">10</span>个<span class="hljs-symbol">Grocery</span>对象以及<span class="hljs-number">10</span>个弱引用-------------------------------</span><br><span class="line"><span class="hljs-symbol">Just</span> created weak: weak<span class="hljs-number">-0</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created weak: weak<span class="hljs-number">-1</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created weak: weak<span class="hljs-number">-2</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created weak: weak<span class="hljs-number">-3</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created weak: weak<span class="hljs-number">-4</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created weak: weak<span class="hljs-number">-5</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created weak: weak<span class="hljs-number">-6</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created weak: weak<span class="hljs-number">-7</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created weak: weak<span class="hljs-number">-8</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created weak: weak<span class="hljs-number">-9</span></span><br><span class="line">--------------------创建<span class="hljs-number">10</span>个<span class="hljs-symbol">Grocery</span>对象以及<span class="hljs-number">10</span>个虚引用-------------------------------</span><br><span class="line"><span class="hljs-symbol">Finalizing</span> weak<span class="hljs-number">-3</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> weak<span class="hljs-number">-2</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> weak<span class="hljs-number">-1</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> weak<span class="hljs-number">-0</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> weak<span class="hljs-number">-5</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> weak<span class="hljs-number">-4</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created <span class="hljs-symbol">Phantom</span>: null</span><br><span class="line"><span class="hljs-symbol">Finalizing</span> weak<span class="hljs-number">-9</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> weak<span class="hljs-number">-8</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created <span class="hljs-symbol">Phantom</span>: null</span><br><span class="line"><span class="hljs-symbol">Finalizing</span> weak<span class="hljs-number">-7</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created <span class="hljs-symbol">Phantom</span>: null</span><br><span class="line"><span class="hljs-symbol">Finalizing</span> weak<span class="hljs-number">-6</span></span><br><span class="line"><span class="hljs-symbol">Just</span> created <span class="hljs-symbol">Phantom</span>: null</span><br><span class="line"><span class="hljs-symbol">Just</span> created <span class="hljs-symbol">Phantom</span>: null</span><br><span class="line"><span class="hljs-symbol">Just</span> created <span class="hljs-symbol">Phantom</span>: null</span><br><span class="line"><span class="hljs-symbol">Just</span> created <span class="hljs-symbol">Phantom</span>: null</span><br><span class="line"><span class="hljs-symbol">Just</span> created <span class="hljs-symbol">Phantom</span>: null</span><br><span class="line"><span class="hljs-symbol">Just</span> created <span class="hljs-symbol">Phantom</span>: null</span><br><span class="line"><span class="hljs-symbol">Just</span> created <span class="hljs-symbol">Phantom</span>: null</span><br><span class="line"><span class="hljs-symbol">In</span> queue: java.lang.ref.<span class="hljs-symbol">WeakReference</span>@<span class="hljs-number">13883</span>d5f : null</span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Phantom</span><span class="hljs-number">-4</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Phantom</span><span class="hljs-number">-6</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Phantom</span><span class="hljs-number">-7</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Phantom</span><span class="hljs-number">-8</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Phantom</span><span class="hljs-number">-3</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Phantom</span><span class="hljs-number">-5</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Phantom</span><span class="hljs-number">-9</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Phantom</span><span class="hljs-number">-0</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Phantom</span><span class="hljs-number">-1</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Phantom</span><span class="hljs-number">-2</span></span><br></pre></td></tr></table></figure></p>
<p>结论：虚引用形同虚设，它所引用的对象随时可能被垃圾回收；具有弱引用的对象拥有稍微长的生命周期，当垃圾回收器执行回收操作时，有可能被垃圾回收；具有软引用的对象拥有较长的生命周期，但在Java虚拟机认为内存不足的情况下，也会被垃圾回收。</p>
<h2 id="2-2-软引用"><a href="#2-2-软引用" class="headerlink" title="2.2 软引用"></a>2.2 软引用</h2><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MyObject aRef=<span class="hljs-keyword">new</span> MyObject();  </span><br><span class="line">SoftReference aSoftRef=<span class="hljs-keyword">new</span> SoftReference(aRef);</span><br></pre></td></tr></table></figure>
<p>对于这个<code>MyObject</code>对象，有两个引用路径，一个是来自SoftReference对象的软引用，一个来自变量<code>aReference</code>的强引用，所以这个<code>MyObject</code>对象是强可及对象。<br>Java虚拟机的垃圾收集线程对软可及对象和其他一般Java对象进行区别对待：软可及对象的清理是由垃圾收集线程根据其特定算法按照内存需求决定的。<br>也就是说，垃圾收集线程会在虚拟机抛出<code>OutOfMemoryError</code>之前回收软可及对象，而且虚拟机会尽可能优先回收长时间闲置不用的软可及对象，对那些刚刚构建的或刚刚使用过的“新”软可反对象会被虚拟机尽可能保留。<br><code>SoftReference</code>的特点是它的一个实例保存对一个Java对象的软引用，该软引用的存在不妨碍垃圾收集线程对该Java对象的回收。<br>也就是说， 一旦<code>SoftReference</code>保存对一个Java对象的软引用后，在垃圾线程对这个Java对象回收前，<code>SoftReference</code>类所提供的<code>get()</code>返回Java对象的强引用。另外，一旦垃圾线程回收该Java对象之后，<code>get()</code>将返回null。  </p>
<h2 id="2-3-软引用实现缓存"><a href="#2-3-软引用实现缓存" class="headerlink" title="2.3 软引用实现缓存"></a>2.3 软引用实现缓存</h2><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> soft;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Employee</span> </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">private</span> String id;<span class="hljs-comment">// 雇员的标识号码</span></span><br><span class="line">	<span class="hljs-keyword">private</span> String name;<span class="hljs-comment">// 雇员姓名</span></span><br><span class="line"></span><br><span class="line">	<span class="hljs-comment">// 构造方法</span></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Employee</span><span class="hljs-params">(String id)</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">this</span>.id = id;</span><br><span class="line">		getDataFromlnfoCenter();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-comment">// 到数据库中取得雇员信息</span></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getDataFromlnfoCenter</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		<span class="hljs-comment">// 和数据库建立连接井查询该雇员的信息，将查询结果赋值</span></span><br><span class="line">		<span class="hljs-comment">// 给name，department，plone，salary等变量</span></span><br><span class="line">		<span class="hljs-comment">// 同时将origin赋值为"From DataBase"</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(String id)</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> soft;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.ReferenceQueue;</span><br><span class="line"><span class="hljs-keyword">import</span> java.lang.ref.SoftReference;</span><br><span class="line"><span class="hljs-keyword">import</span> java.util.Hashtable;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmployeeCache</span> </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">static</span> <span class="hljs-keyword">private</span> EmployeeCache cache;<span class="hljs-comment">// 一个Cache实例</span></span><br><span class="line">	<span class="hljs-keyword">private</span> Hashtable employeeRefs;<span class="hljs-comment">// 用于Chche内容的存储</span></span><br><span class="line">	<span class="hljs-keyword">private</span> ReferenceQueue q;<span class="hljs-comment">// 垃圾Reference的队列</span></span><br><span class="line"></span><br><span class="line">	<span class="hljs-comment">// 继承SoftReference，使得每一个实例都具有可识别的标识。</span></span><br><span class="line">	<span class="hljs-comment">// 并且该标识与其在HashMap内的key相同。</span></span><br><span class="line">	<span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmployeeRef</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SoftReference</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">private</span> String _key = <span class="hljs-string">""</span>;</span><br><span class="line"></span><br><span class="line">		<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">EmployeeRef</span><span class="hljs-params">(Employee em, ReferenceQueue q)</span> </span>&#123;</span><br><span class="line">			<span class="hljs-keyword">super</span>(em, q);</span><br><span class="line">			_key = em.getId();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-comment">// 构建一个缓存器实例</span></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">EmployeeCache</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		employeeRefs = <span class="hljs-keyword">new</span> Hashtable();</span><br><span class="line">		q = <span class="hljs-keyword">new</span> ReferenceQueue();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-comment">// 取得缓存器实例</span></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> EmployeeCache <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (cache == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">			cache = <span class="hljs-keyword">new</span> EmployeeCache();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">return</span> cache;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-comment">// 以软引用的方式对一个Employee对象的实例进行引用并保存该引用</span></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">cacheEmployee</span><span class="hljs-params">(Employee em)</span> </span>&#123;</span><br><span class="line">		cleanCache();<span class="hljs-comment">// 清除垃圾引用</span></span><br><span class="line">		EmployeeRef ref = <span class="hljs-keyword">new</span> EmployeeRef(em, q);</span><br><span class="line">		employeeRefs.put(em.getId(), ref);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-comment">// 依据所指定的ID号，重新获取相应Employee对象的实例</span></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> Employee <span class="hljs-title">getEmployee</span><span class="hljs-params">(String ID)</span> </span>&#123;</span><br><span class="line">		Employee em = <span class="hljs-keyword">null</span>;</span><br><span class="line">		<span class="hljs-comment">// 缓存中是否有该Employee实例的软引用，如果有，从软引用中取得。</span></span><br><span class="line">		<span class="hljs-keyword">if</span> (employeeRefs.containsKey(ID)) &#123;</span><br><span class="line">			EmployeeRef ref = (EmployeeRef) employeeRefs.get(ID);</span><br><span class="line">			em = (Employee) ref.get();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-comment">// 如果没有软引用，或者从软引用中得到的实例是null，重新构建一个实例，</span></span><br><span class="line">		<span class="hljs-comment">// 并保存对这个新建实例的软引用</span></span><br><span class="line">		<span class="hljs-keyword">if</span> (em == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">			em = <span class="hljs-keyword">new</span> Employee(ID);</span><br><span class="line">			System.out.println(<span class="hljs-string">"Retrieve From EmployeeInfoCenter. ID="</span> + ID);</span><br><span class="line">			<span class="hljs-keyword">this</span>.cacheEmployee(em);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">return</span> em;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-comment">// 清除那些所软引用的Employee对象已经被回收的EmployeeRef对象</span></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">cleanCache</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		EmployeeRef ref = <span class="hljs-keyword">null</span>;</span><br><span class="line">		<span class="hljs-keyword">while</span> ((ref = (EmployeeRef) q.poll()) != <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">			employeeRefs.remove(ref._key);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-comment">// 清除Cache内的全部内容</span></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">clearCache</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		cleanCache();</span><br><span class="line">		employeeRefs.clear();</span><br><span class="line">		System.gc();</span><br><span class="line">		System.runFinalization();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-4-弱引用"><a href="#2-4-弱引用" class="headerlink" title="2.4 弱引用"></a>2.4 弱引用</h2><p>在Java集合中有一种特殊的<code>Map</code>类型<code>WeakHashMap</code>， 在这种<code>Map</code>中存放键对象的弱引用，当一个键对象被垃圾回收，那么相应的值对象的引用会从<code>Map</code>中删除。<code>WeakHashMap</code>能够节约存储空间，可用来缓存那些非必须存在的数据。<br>以下代码<code>MapCache</code>类的<code>main()</code>创建一个<code>WeakHashMap</code>对象，它存放一组<code>Key</code>对象的弱引用，此外<code>main()</code>还创建一个数组对象，它存放部分<code>Key</code>对象的强引用。<br><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> weak;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> java.util.WeakHashMap;</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Key</span> </span>&#123;</span><br><span class="line">	String id;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Key</span><span class="hljs-params">(String id)</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> id.hashCode();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object r)</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> (r <span class="hljs-keyword">instanceof</span> Key) &amp;&amp; id.equals(((Key) r).id);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">finalize</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="hljs-string">"Finalizing Key "</span> + id);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Value</span> </span>&#123;</span><br><span class="line">	String id;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Value</span><span class="hljs-params">(String id)</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">finalize</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="hljs-string">"Finalizing Value "</span> + id);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MapCache</span> </span>&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="hljs-keyword">int</span> size = <span class="hljs-number">1000</span>;<span class="hljs-comment">// 或者从命令行获得size的大小</span></span><br><span class="line">		Key[] keys = <span class="hljs-keyword">new</span> Key[size]; <span class="hljs-comment">// 存放键对象的强引用</span></span><br><span class="line">		WeakHashMap whm = <span class="hljs-keyword">new</span> WeakHashMap();</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">			Key k = <span class="hljs-keyword">new</span> Key(Integer.toString(i));</span><br><span class="line">			Value v = <span class="hljs-keyword">new</span> Value(Integer.toString(i));</span><br><span class="line">			<span class="hljs-keyword">if</span> (i % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>) &#123;</span><br><span class="line">				keys[i] = k; <span class="hljs-comment">// 使Key对象持有强引用</span></span><br><span class="line">			&#125;</span><br><span class="line">			whm.put(k, v); <span class="hljs-comment">// 使Key对象持有弱引用</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-comment">// 催促垃圾回收器工作</span></span><br><span class="line">		System.gc();<span class="hljs-comment">// 把CPU让给垃圾回收器线程</span></span><br><span class="line">		Thread.sleep(<span class="hljs-number">8000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>控制台打印<br><figure class="highlight prolog hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Key</span> <span class="hljs-number">587</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Key</span> <span class="hljs-number">985</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Key</span> <span class="hljs-number">998</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Key</span> <span class="hljs-number">997</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Key</span> <span class="hljs-number">995</span></span><br><span class="line"><span class="hljs-symbol">Finalizing</span> <span class="hljs-symbol">Key</span> <span class="hljs-number">994</span></span><br><span class="line">..................</span><br></pre></td></tr></table></figure></p>
<p>结果：当执行<code>System.gc()</code>后，垃圾回收器只会回收那些仅仅持有弱引用的<code>Key</code>对象。id可以被3整数的<code>Key</code>对象持有强引用，因此不会被回收。</p>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/Java/">Java</a>
                </div>
            </div>
        </div>
        
        
        
        <div class="social-share"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css">
<script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3>
        <div class="buttons is-centered">
            
                
<a class="button is-info donate">
    <span class="icon is-small">
        <i class="fab fa-alipay"></i>
    </span>
    <span>支付宝</span>
    <div class="qrcode"><img src="/images/alipaycode.jpg" alt="支付宝"></div>
</a>

                
                
<a class="button is-success donate">
    <span class="icon is-small">
        <i class="fab fa-weixin"></i>
    </span>
    <span>微信</span>
    <div class="qrcode"><img src="/images/wxcode.png" alt="微信"></div>
</a>

                
        </div>
    </div>
</div>



<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/Infix-Expression-Is-Converted-To-A-Postfix-Expression/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">中缀表达式转换为后缀表达式</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/++iAndi++/">
                <span class="level-item">++i和i++简单分析</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">评论</h3>
        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.min.js"></script>
<script>
    var gitalk = new Gitalk({
        clientID: 'a70be08270bc7c083f83',
        clientSecret: '1b08252e3cf4b0c29b5f52f431ad9a54eef0a74a',
        id: 'df2e0130d1d0d2d784d4d58624dab812',
        repo: 'joeskye1701.github.io',
        owner: 'joeskye1701',
        admin: "joeskye1701"
    })
    gitalk.render('comment-container')
</script>

    </div>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/thank-you-kobe.jpg" alt="Joe">
                    
                    
                    <p class="is-size-4 is-block">
                        Joe
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        Developer &amp; Designer
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Shenzhen, China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        129
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        26
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        54
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/joeskye1701">
                关注我</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="https://github.com/joeskye1701">
                
                <i class="fab fa-github"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="http://wss.xxyseo.cn/" target="_blank">
                    <span class="level-left">
                        <span class="level-item">西乡大佬</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">wss.xxyseo.cn</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Android/">
            <span class="level-start">
                <span class="level-item">Android</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JDK6-源码/">
            <span class="level-start">
                <span class="level-item">JDK6 源码</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">18</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JDK7-源码/">
            <span class="level-start">
                <span class="level-item">JDK7 源码</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JDK8-源码/">
            <span class="level-start">
                <span class="level-item">JDK8 源码</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JMM/">
            <span class="level-start">
                <span class="level-item">JMM</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/JVM/">
            <span class="level-start">
                <span class="level-item">JVM</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">10</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Java/">
            <span class="level-start">
                <span class="level-item">Java</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">20</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Linux/">
            <span class="level-start">
                <span class="level-item">Linux</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/MyBatis/">
            <span class="level-start">
                <span class="level-item">MyBatis</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/MySQL/">
            <span class="level-start">
                <span class="level-item">MySQL</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Redis/">
            <span class="level-start">
                <span class="level-item">Redis</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Spring/">
            <span class="level-start">
                <span class="level-item">Spring</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Tomcat/">
            <span class="level-start">
                <span class="level-item">Tomcat</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">7</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/书/">
            <span class="level-start">
                <span class="level-item">书</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/多线程/">
            <span class="level-start">
                <span class="level-item">多线程</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/并发/">
            <span class="level-start">
                <span class="level-item">并发</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/开源项目/">
            <span class="level-start">
                <span class="level-item">开源项目</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/数学/">
            <span class="level-start">
                <span class="level-item">数学</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/数据库/">
            <span class="level-start">
                <span class="level-item">数据库</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/数据结构/">
            <span class="level-start">
                <span class="level-item">数据结构</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/日语/">
            <span class="level-start">
                <span class="level-item">日语</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/机器学习/">
            <span class="level-start">
                <span class="level-item">机器学习</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/算法/">
            <span class="level-start">
                <span class="level-item">算法</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">23</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/计算机基础/">
            <span class="level-start">
                <span class="level-item">计算机基础</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/设计模式/">
            <span class="level-start">
                <span class="level-item">设计模式</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/面试/">
            <span class="level-start">
                <span class="level-item">面试</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Centos/" style="font-size: 11.82px;">Centos</a> <a href="/tags/Effect-Java/" style="font-size: 10.91px;">Effect Java</a> <a href="/tags/JDK6-源码/" style="font-size: 18.18px;">JDK6 源码</a> <a href="/tags/JDK7-源码/" style="font-size: 14.55px;">JDK7 源码</a> <a href="/tags/JDK8-源码/" style="font-size: 10px;">JDK8 源码</a> <a href="/tags/JMM/" style="font-size: 15.45px;">JMM</a> <a href="/tags/JVM/" style="font-size: 16.36px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Linux/" style="font-size: 12.73px;">Linux</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/Mongodb/" style="font-size: 10px;">Mongodb</a> <a href="/tags/MyBatis/" style="font-size: 11.82px;">MyBatis</a> <a href="/tags/MySQL/" style="font-size: 10.91px;">MySQL</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Spring/" style="font-size: 12.73px;">Spring</a> <a href="/tags/Think-In-Java/" style="font-size: 10px;">Think In Java</a> <a href="/tags/Tomcat/" style="font-size: 15.45px;">Tomcat</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/一致性哈希算法/" style="font-size: 10px;">一致性哈希算法</a> <a href="/tags/书/" style="font-size: 11.82px;">书</a> <a href="/tags/倒排索引/" style="font-size: 10px;">倒排索引</a> <a href="/tags/内存泄漏/" style="font-size: 10px;">内存泄漏</a> <a href="/tags/分支限界算法/" style="font-size: 10.91px;">分支限界算法</a> <a href="/tags/分治法/" style="font-size: 10px;">分治法</a> <a href="/tags/分治算法/" style="font-size: 10px;">分治算法</a> <a href="/tags/分词算法/" style="font-size: 10.91px;">分词算法</a> <a href="/tags/动态规划/" style="font-size: 10px;">动态规划</a> <a href="/tags/动态规划算法/" style="font-size: 10.91px;">动态规划算法</a> <a href="/tags/华为/" style="font-size: 10px;">华为</a> <a href="/tags/回溯算法/" style="font-size: 12.73px;">回溯算法</a> <a href="/tags/多线程/" style="font-size: 10.91px;">多线程</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/并发/" style="font-size: 13.64px;">并发</a> <a href="/tags/开源项目/" style="font-size: 17.27px;">开源项目</a> <a href="/tags/手机游戏/" style="font-size: 10px;">手机游戏</a> <a href="/tags/排序算法/" style="font-size: 10px;">排序算法</a> <a href="/tags/推荐/" style="font-size: 10px;">推荐</a> <a href="/tags/散列表/" style="font-size: 10px;">散列表</a> <a href="/tags/数学/" style="font-size: 10px;">数学</a> <a href="/tags/数据库/" style="font-size: 10.91px;">数据库</a> <a href="/tags/数据结构/" style="font-size: 13.64px;">数据结构</a> <a href="/tags/日语/" style="font-size: 10px;">日语</a> <a href="/tags/最优路径算法/" style="font-size: 10px;">最优路径算法</a> <a href="/tags/机器学习/" style="font-size: 10px;">机器学习</a> <a href="/tags/源码/" style="font-size: 11.82px;">源码</a> <a href="/tags/算法/" style="font-size: 19.09px;">算法</a> <a href="/tags/线程安全/" style="font-size: 10.91px;">线程安全</a> <a href="/tags/编程珠玑/" style="font-size: 11.82px;">编程珠玑</a> <a href="/tags/计算机基础/" style="font-size: 10px;">计算机基础</a> <a href="/tags/设计模式/" style="font-size: 12.73px;">设计模式</a> <a href="/tags/贪心算法/" style="font-size: 11.82px;">贪心算法</a> <a href="/tags/跳表/" style="font-size: 10px;">跳表</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            <!-- 
            <a href="/VIM-Command/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="VIM 命令">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-12-10T02:31:22.000Z">2018-12-10</time></div>
                    <a href="/VIM-Command/" class="has-link-black-ter is-size-6">VIM 命令</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/Lock-Control/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="锁粒度的控制">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-04T04:37:22.000Z">2018-11-04</time></div>
                    <a href="/Lock-Control/" class="has-link-black-ter is-size-6">锁粒度的控制</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/Temporary-Menory-Table/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="临时表和内存表">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-04T04:37:22.000Z">2018-11-04</time></div>
                    <a href="/Temporary-Menory-Table/" class="has-link-black-ter is-size-6">临时表和内存表</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/MySQL/">MySQL</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/MySQL-Command/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="MySQL基本命令">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T04:37:22.000Z">2018-11-03</time></div>
                    <a href="/MySQL-Command/" class="has-link-black-ter is-size-6">MySQL基本命令</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/MySQL/">MySQL</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/Python2ToPython3/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Python2切换Python3">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T04:37:22.000Z">2018-11-03</time></div>
                    <a href="/Python2ToPython3/" class="has-link-black-ter is-size-6">Python2切换Python3</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">十月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">九月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">八月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">七月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">六月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">五月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/04/">
                <span class="level-start">
                    <span class="level-item">四月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/03/">
                <span class="level-start">
                    <span class="level-item">三月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/02/">
                <span class="level-start">
                    <span class="level-item">二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/10/">
                <span class="level-start">
                    <span class="level-item">十月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">13</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/09/">
                <span class="level-start">
                    <span class="level-item">九月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/08/">
                <span class="level-start">
                    <span class="level-item">八月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/07/">
                <span class="level-start">
                    <span class="level-item">七月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/06/">
                <span class="level-start">
                    <span class="level-item">六月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/05/">
                <span class="level-start">
                    <span class="level-item">五月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/04/">
                <span class="level-start">
                    <span class="level-item">四月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/03/">
                <span class="level-start">
                    <span class="level-item">三月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/02/">
                <span class="level-start">
                    <span class="level-item">二月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/01/">
                <span class="level-start">
                    <span class="level-item">一月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/09/">
                <span class="level-start">
                    <span class="level-item">九月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/03/">
                <span class="level-start">
                    <span class="level-item">三月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/10/">
                <span class="level-start">
                    <span class="level-item">十月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/08/">
                <span class="level-start">
                    <span class="level-item">八月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/07/">
                <span class="level-start">
                    <span class="level-item">七月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/06/">
                <span class="level-start">
                    <span class="level-item">六月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/04/">
                <span class="level-start">
                    <span class="level-item">四月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/03/">
                <span class="level-start">
                    <span class="level-item">三月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/02/">
                <span class="level-start">
                    <span class="level-item">二月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/01/">
                <span class="level-start">
                    <span class="level-item">一月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android/">
                        <span class="tag">Android</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Centos/">
                        <span class="tag">Centos</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Effect-Java/">
                        <span class="tag">Effect Java</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JDK6-源码/">
                        <span class="tag">JDK6 源码</span>
                        <span class="tag is-grey">18</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JDK7-源码/">
                        <span class="tag">JDK7 源码</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JDK8-源码/">
                        <span class="tag">JDK8 源码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JMM/">
                        <span class="tag">JMM</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JVM/">
                        <span class="tag">JVM</span>
                        <span class="tag is-grey">10</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">40</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Linux/">
                        <span class="tag">Linux</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MongoDB/">
                        <span class="tag">MongoDB</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Mongodb/">
                        <span class="tag">Mongodb</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MyBatis/">
                        <span class="tag">MyBatis</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MySQL/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Redis/">
                        <span class="tag">Redis</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Spring/">
                        <span class="tag">Spring</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Think-In-Java/">
                        <span class="tag">Think In Java</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Tomcat/">
                        <span class="tag">Tomcat</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Ubuntu/">
                        <span class="tag">Ubuntu</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/一致性哈希算法/">
                        <span class="tag">一致性哈希算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/书/">
                        <span class="tag">书</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/倒排索引/">
                        <span class="tag">倒排索引</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/内存泄漏/">
                        <span class="tag">内存泄漏</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分支限界算法/">
                        <span class="tag">分支限界算法</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分治法/">
                        <span class="tag">分治法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分治算法/">
                        <span class="tag">分治算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分词算法/">
                        <span class="tag">分词算法</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态规划/">
                        <span class="tag">动态规划</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态规划算法/">
                        <span class="tag">动态规划算法</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/华为/">
                        <span class="tag">华为</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/回溯算法/">
                        <span class="tag">回溯算法</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/多线程/">
                        <span class="tag">多线程</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/工具/">
                        <span class="tag">工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/并发/">
                        <span class="tag">并发</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源项目/">
                        <span class="tag">开源项目</span>
                        <span class="tag is-grey">17</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/手机游戏/">
                        <span class="tag">手机游戏</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/排序算法/">
                        <span class="tag">排序算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/推荐/">
                        <span class="tag">推荐</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/散列表/">
                        <span class="tag">散列表</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数学/">
                        <span class="tag">数学</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据库/">
                        <span class="tag">数据库</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据结构/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/日语/">
                        <span class="tag">日语</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/最优路径算法/">
                        <span class="tag">最优路径算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/机器学习/">
                        <span class="tag">机器学习</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/源码/">
                        <span class="tag">源码</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/算法/">
                        <span class="tag">算法</span>
                        <span class="tag is-grey">26</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/线程安全/">
                        <span class="tag">线程安全</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/编程珠玑/">
                        <span class="tag">编程珠玑</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/计算机基础/">
                        <span class="tag">计算机基础</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/设计模式/">
                        <span class="tag">设计模式</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/贪心算法/">
                        <span class="tag">贪心算法</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/跳表/">
                        <span class="tag">跳表</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/面试/">
                        <span class="tag">面试</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            <!-- 
            <a href="/VIM-Command/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="VIM 命令">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-12-10T02:31:22.000Z">2018-12-10</time></div>
                    <a href="/VIM-Command/" class="has-link-black-ter is-size-6">VIM 命令</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/Lock-Control/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="锁粒度的控制">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-04T04:37:22.000Z">2018-11-04</time></div>
                    <a href="/Lock-Control/" class="has-link-black-ter is-size-6">锁粒度的控制</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/Temporary-Menory-Table/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="临时表和内存表">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-04T04:37:22.000Z">2018-11-04</time></div>
                    <a href="/Temporary-Menory-Table/" class="has-link-black-ter is-size-6">临时表和内存表</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/MySQL/">MySQL</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/MySQL-Command/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="MySQL基本命令">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T04:37:22.000Z">2018-11-03</time></div>
                    <a href="/MySQL-Command/" class="has-link-black-ter is-size-6">MySQL基本命令</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/MySQL/">MySQL</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            <!-- 
            <a href="/Python2ToPython3/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Python2切换Python3">
                </p>
            </a>
             -->
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-03T04:37:22.000Z">2018-11-03</time></div>
                    <a href="/Python2ToPython3/" class="has-link-black-ter is-size-6">Python2切换Python3</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">十月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">九月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">八月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">七月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">六月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">五月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/04/">
                <span class="level-start">
                    <span class="level-item">四月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/03/">
                <span class="level-start">
                    <span class="level-item">三月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/02/">
                <span class="level-start">
                    <span class="level-item">二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/10/">
                <span class="level-start">
                    <span class="level-item">十月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">13</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/09/">
                <span class="level-start">
                    <span class="level-item">九月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/08/">
                <span class="level-start">
                    <span class="level-item">八月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/07/">
                <span class="level-start">
                    <span class="level-item">七月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/06/">
                <span class="level-start">
                    <span class="level-item">六月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/05/">
                <span class="level-start">
                    <span class="level-item">五月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/04/">
                <span class="level-start">
                    <span class="level-item">四月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/03/">
                <span class="level-start">
                    <span class="level-item">三月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/02/">
                <span class="level-start">
                    <span class="level-item">二月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/01/">
                <span class="level-start">
                    <span class="level-item">一月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/09/">
                <span class="level-start">
                    <span class="level-item">九月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/03/">
                <span class="level-start">
                    <span class="level-item">三月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/10/">
                <span class="level-start">
                    <span class="level-item">十月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/08/">
                <span class="level-start">
                    <span class="level-item">八月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/07/">
                <span class="level-start">
                    <span class="level-item">七月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/06/">
                <span class="level-start">
                    <span class="level-item">六月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/04/">
                <span class="level-start">
                    <span class="level-item">四月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/03/">
                <span class="level-start">
                    <span class="level-item">三月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/02/">
                <span class="level-start">
                    <span class="level-item">二月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2013/01/">
                <span class="level-start">
                    <span class="level-item">一月 2013</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Android/">
                        <span class="tag">Android</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Centos/">
                        <span class="tag">Centos</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Effect-Java/">
                        <span class="tag">Effect Java</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JDK6-源码/">
                        <span class="tag">JDK6 源码</span>
                        <span class="tag is-grey">18</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JDK7-源码/">
                        <span class="tag">JDK7 源码</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JDK8-源码/">
                        <span class="tag">JDK8 源码</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JMM/">
                        <span class="tag">JMM</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/JVM/">
                        <span class="tag">JVM</span>
                        <span class="tag is-grey">10</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Java/">
                        <span class="tag">Java</span>
                        <span class="tag is-grey">40</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Linux/">
                        <span class="tag">Linux</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MongoDB/">
                        <span class="tag">MongoDB</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Mongodb/">
                        <span class="tag">Mongodb</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MyBatis/">
                        <span class="tag">MyBatis</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MySQL/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Redis/">
                        <span class="tag">Redis</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Spring/">
                        <span class="tag">Spring</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Think-In-Java/">
                        <span class="tag">Think In Java</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Tomcat/">
                        <span class="tag">Tomcat</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Ubuntu/">
                        <span class="tag">Ubuntu</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/一致性哈希算法/">
                        <span class="tag">一致性哈希算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/书/">
                        <span class="tag">书</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/倒排索引/">
                        <span class="tag">倒排索引</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/内存泄漏/">
                        <span class="tag">内存泄漏</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分支限界算法/">
                        <span class="tag">分支限界算法</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分治法/">
                        <span class="tag">分治法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分治算法/">
                        <span class="tag">分治算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/分词算法/">
                        <span class="tag">分词算法</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态规划/">
                        <span class="tag">动态规划</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态规划算法/">
                        <span class="tag">动态规划算法</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/华为/">
                        <span class="tag">华为</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/回溯算法/">
                        <span class="tag">回溯算法</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/多线程/">
                        <span class="tag">多线程</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/工具/">
                        <span class="tag">工具</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/并发/">
                        <span class="tag">并发</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/开源项目/">
                        <span class="tag">开源项目</span>
                        <span class="tag is-grey">17</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/手机游戏/">
                        <span class="tag">手机游戏</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/排序算法/">
                        <span class="tag">排序算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/推荐/">
                        <span class="tag">推荐</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/散列表/">
                        <span class="tag">散列表</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数学/">
                        <span class="tag">数学</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据库/">
                        <span class="tag">数据库</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据结构/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/日语/">
                        <span class="tag">日语</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/最优路径算法/">
                        <span class="tag">最优路径算法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/机器学习/">
                        <span class="tag">机器学习</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/源码/">
                        <span class="tag">源码</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/算法/">
                        <span class="tag">算法</span>
                        <span class="tag is-grey">26</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/线程安全/">
                        <span class="tag">线程安全</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/编程珠玑/">
                        <span class="tag">编程珠玑</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/计算机基础/">
                        <span class="tag">计算机基础</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/设计模式/">
                        <span class="tag">设计模式</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/贪心算法/">
                        <span class="tag">贪心算法</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/跳表/">
                        <span class="tag">跳表</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/面试/">
                        <span class="tag">面试</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    Joe|博客
                
                </a>
                <p class="is-size-7">
                &copy; 2019 Joe&nbsp;
                <!-- Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a> -->
                
                </p>
            </div>
            <div class="level-end">
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>